{"version":3,"file":"QuizPage-gerg9sEU.js","sources":["../../src/utils/scorer.ts","../../src/utils/storage.ts","../../src/hooks/useLocalStorage.ts","../../src/hooks/useQuizSession.ts","../../src/components/quiz/ProgressBar.tsx","../../src/components/quiz/QuizResultsScreen.tsx","../../src/pages/QuizPage.tsx"],"sourcesContent":["/**\n * Answer Scorer - Check answers and calculate performance statistics\n */\n\nimport type { DifficultyLevel } from '@/types/question';\n\n/**\n * Question attempt record\n */\nexport interface QuestionAttempt {\n  questionId: string;\n  unitId: string;\n  chapterId: string;\n  difficulty: DifficultyLevel;\n  userAnswer: string;\n  correctAnswer: string;\n  isCorrect: boolean;\n  timeSpent: number; // in seconds\n  attemptedAt: string;\n}\n\n/**\n * Unit performance breakdown\n */\nexport interface UnitBreakdown {\n  unitId: string;\n  totalAttempts: number;\n  correctAnswers: number;\n  accuracy: number; // percentage\n}\n\n/**\n * Performance statistics\n */\nexport interface PerformanceStats {\n  totalAttempts: number;\n  correctCount: number;\n  incorrectCount: number;\n  accuracy: number; // percentage\n  averageTimePerQuestion: number; // in seconds\n  byDifficulty: {\n    easy: { total: number; correct: number; accuracy: number };\n    medium: { total: number; correct: number; accuracy: number };\n    hard: { total: number; correct: number; accuracy: number };\n  };\n  byUnit: Record<string, { total: number; correct: number; accuracy: number }>;\n}\n\n/**\n * Weak area identification\n */\nexport interface WeakArea {\n  type: 'unit' | 'chapter' | 'difficulty';\n  identifier: string;\n  label: string;\n  accuracy: number;\n  totalAttempts: number;\n  recommendation: string;\n}\n\n/**\n * Check if a user's answer is correct\n * @param questionId - The question ID (for logging)\n * @param userAnswer - The user's answer\n * @param correctAnswer - The correct answer\n * @returns True if the answer is correct\n */\nexport function checkAnswer(\n  questionId: string,\n  userAnswer: string,\n  correctAnswer: string\n): boolean {\n  if (!userAnswer || !correctAnswer) {\n    console.warn(`Invalid answer check for question ${questionId}`);\n    return false;\n  }\n\n  // Normalize answers (trim and compare case-insensitively for answer IDs)\n  const normalizedUserAnswer = userAnswer.trim().toUpperCase();\n  const normalizedCorrectAnswer = correctAnswer.trim().toUpperCase();\n\n  return normalizedUserAnswer === normalizedCorrectAnswer;\n}\n\n/**\n * Calculate overall accuracy from attempts\n * @param attempts - Array of question attempts\n * @returns Accuracy as a percentage (0-100)\n */\nexport function calculateAccuracy(attempts: QuestionAttempt[]): number {\n  if (attempts.length === 0) {\n    return 0;\n  }\n\n  const correctCount = attempts.filter((a) => a.isCorrect).length;\n  return Math.round((correctCount / attempts.length) * 100 * 100) / 100; // Round to 2 decimal places\n}\n\n/**\n * Calculate unit-by-unit breakdown\n * @param attempts - Array of question attempts\n * @returns Array of unit breakdowns\n */\nexport function calculateUnitBreakdown(attempts: QuestionAttempt[]): UnitBreakdown[] {\n  const unitMap = new Map<string, { total: number; correct: number }>();\n\n  attempts.forEach((attempt) => {\n    const existing = unitMap.get(attempt.unitId) || { total: 0, correct: 0 };\n    existing.total++;\n    if (attempt.isCorrect) {\n      existing.correct++;\n    }\n    unitMap.set(attempt.unitId, existing);\n  });\n\n  const breakdowns: UnitBreakdown[] = [];\n  unitMap.forEach((stats, unitId) => {\n    breakdowns.push({\n      unitId,\n      totalAttempts: stats.total,\n      correctAnswers: stats.correct,\n      accuracy: Math.round((stats.correct / stats.total) * 100 * 100) / 100,\n    });\n  });\n\n  // Sort by unit ID\n  return breakdowns.sort((a, b) => a.unitId.localeCompare(b.unitId));\n}\n\n/**\n * Calculate comprehensive performance statistics\n * @param attempts - Array of question attempts\n * @returns Detailed performance statistics\n */\nexport function getPerformanceStats(attempts: QuestionAttempt[]): PerformanceStats {\n  if (attempts.length === 0) {\n    return {\n      totalAttempts: 0,\n      correctCount: 0,\n      incorrectCount: 0,\n      accuracy: 0,\n      averageTimePerQuestion: 0,\n      byDifficulty: {\n        easy: { total: 0, correct: 0, accuracy: 0 },\n        medium: { total: 0, correct: 0, accuracy: 0 },\n        hard: { total: 0, correct: 0, accuracy: 0 },\n      },\n      byUnit: {},\n    };\n  }\n\n  const correctCount = attempts.filter((a) => a.isCorrect).length;\n  const totalTime = attempts.reduce((sum, a) => sum + a.timeSpent, 0);\n\n  // Calculate by difficulty\n  const difficultyStats = {\n    easy: { total: 0, correct: 0, accuracy: 0 },\n    medium: { total: 0, correct: 0, accuracy: 0 },\n    hard: { total: 0, correct: 0, accuracy: 0 },\n  };\n\n  attempts.forEach((attempt) => {\n    difficultyStats[attempt.difficulty].total++;\n    if (attempt.isCorrect) {\n      difficultyStats[attempt.difficulty].correct++;\n    }\n  });\n\n  // Calculate accuracy for each difficulty\n  Object.keys(difficultyStats).forEach((key) => {\n    const difficulty = key as DifficultyLevel;\n    const stats = difficultyStats[difficulty];\n    if (stats.total > 0) {\n      stats.accuracy = Math.round((stats.correct / stats.total) * 100 * 100) / 100;\n    }\n  });\n\n  // Calculate by unit\n  const unitStats: Record<string, { total: number; correct: number; accuracy: number }> = {};\n  attempts.forEach((attempt) => {\n    if (!unitStats[attempt.unitId]) {\n      unitStats[attempt.unitId] = { total: 0, correct: 0, accuracy: 0 };\n    }\n    unitStats[attempt.unitId]!.total++;\n    if (attempt.isCorrect) {\n      unitStats[attempt.unitId]!.correct++;\n    }\n  });\n\n  // Calculate accuracy for each unit\n  Object.keys(unitStats).forEach((unitId) => {\n    const stats = unitStats[unitId];\n    if (stats && stats.total > 0) {\n      stats.accuracy = Math.round((stats.correct / stats.total) * 100 * 100) / 100;\n    }\n  });\n\n  return {\n    totalAttempts: attempts.length,\n    correctCount,\n    incorrectCount: attempts.length - correctCount,\n    accuracy: Math.round((correctCount / attempts.length) * 100 * 100) / 100,\n    averageTimePerQuestion: Math.round((totalTime / attempts.length) * 100) / 100,\n    byDifficulty: difficultyStats,\n    byUnit: unitStats,\n  };\n}\n\n/**\n * Identify weak areas that need more practice\n * @param attempts - Array of question attempts\n * @param weakThreshold - Accuracy threshold to consider as weak (default 60%)\n * @returns Array of weak areas with recommendations\n */\nexport function identifyWeakAreas(\n  attempts: QuestionAttempt[],\n  weakThreshold = 60\n): WeakArea[] {\n  if (attempts.length === 0) {\n    return [];\n  }\n\n  const weakAreas: WeakArea[] = [];\n\n  // Check difficulty levels\n  const difficultyStats = {\n    easy: { total: 0, correct: 0 },\n    medium: { total: 0, correct: 0 },\n    hard: { total: 0, correct: 0 },\n  };\n\n  attempts.forEach((attempt) => {\n    difficultyStats[attempt.difficulty].total++;\n    if (attempt.isCorrect) {\n      difficultyStats[attempt.difficulty].correct++;\n    }\n  });\n\n  Object.entries(difficultyStats).forEach(([difficulty, stats]) => {\n    if (stats.total >= 5) {\n      // Only consider if at least 5 attempts\n      const accuracy = (stats.correct / stats.total) * 100;\n      if (accuracy < weakThreshold) {\n        weakAreas.push({\n          type: 'difficulty',\n          identifier: difficulty,\n          label: `${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)} questions`,\n          accuracy: Math.round(accuracy * 100) / 100,\n          totalAttempts: stats.total,\n          recommendation: `Focus on practicing more ${difficulty} difficulty questions to improve your understanding.`,\n        });\n      }\n    }\n  });\n\n  // Check units\n  const unitStats = new Map<string, { total: number; correct: number }>();\n  attempts.forEach((attempt) => {\n    const existing = unitStats.get(attempt.unitId) || { total: 0, correct: 0 };\n    existing.total++;\n    if (attempt.isCorrect) {\n      existing.correct++;\n    }\n    unitStats.set(attempt.unitId, existing);\n  });\n\n  unitStats.forEach((stats, unitId) => {\n    if (stats.total >= 5) {\n      // Only consider if at least 5 attempts\n      const accuracy = (stats.correct / stats.total) * 100;\n      if (accuracy < weakThreshold) {\n        weakAreas.push({\n          type: 'unit',\n          identifier: unitId,\n          label: `Unit ${unitId.substring(1)}`,\n          accuracy: Math.round(accuracy * 100) / 100,\n          totalAttempts: stats.total,\n          recommendation: `Review the material for Unit ${unitId.substring(1)} and practice more questions from this unit.`,\n        });\n      }\n    }\n  });\n\n  // Check chapters\n  const chapterStats = new Map<string, { total: number; correct: number }>();\n  attempts.forEach((attempt) => {\n    const existing = chapterStats.get(attempt.chapterId) || { total: 0, correct: 0 };\n    existing.total++;\n    if (attempt.isCorrect) {\n      existing.correct++;\n    }\n    chapterStats.set(attempt.chapterId, existing);\n  });\n\n  chapterStats.forEach((stats, chapterId) => {\n    if (stats.total >= 3) {\n      // Only consider if at least 3 attempts\n      const accuracy = (stats.correct / stats.total) * 100;\n      if (accuracy < weakThreshold) {\n        weakAreas.push({\n          type: 'chapter',\n          identifier: chapterId,\n          label: `Chapter ${chapterId}`,\n          accuracy: Math.round(accuracy * 100) / 100,\n          totalAttempts: stats.total,\n          recommendation: `Study Chapter ${chapterId} material more thoroughly and practice questions from this chapter.`,\n        });\n      }\n    }\n  });\n\n  // Sort by accuracy (weakest first)\n  return weakAreas.sort((a, b) => a.accuracy - b.accuracy);\n}\n\n/**\n * Calculate streak of correct answers\n * @param attempts - Array of question attempts (should be sorted by attemptedAt)\n * @returns Current streak of correct answers\n */\nexport function calculateCorrectStreak(attempts: QuestionAttempt[]): number {\n  if (attempts.length === 0) {\n    return 0;\n  }\n\n  // Sort by attemptedAt (most recent first)\n  const sorted = [...attempts].sort(\n    (a, b) => new Date(b.attemptedAt).getTime() - new Date(a.attemptedAt).getTime()\n  );\n\n  let streak = 0;\n  for (const attempt of sorted) {\n    if (attempt.isCorrect) {\n      streak++;\n    } else {\n      break;\n    }\n  }\n\n  return streak;\n}\n\n/**\n * Calculate the pass rate for a set of attempts\n * @param attempts - Array of question attempts\n * @param passingThreshold - Passing percentage (default 70%)\n * @returns Whether the user would pass based on these attempts\n */\nexport function calculatePassRate(\n  attempts: QuestionAttempt[],\n  passingThreshold = 70\n): { passed: boolean; accuracy: number; threshold: number } {\n  const accuracy = calculateAccuracy(attempts);\n\n  return {\n    passed: accuracy >= passingThreshold,\n    accuracy,\n    threshold: passingThreshold,\n  };\n}\n\n/**\n * Get recent performance trend\n * @param attempts - Array of question attempts (should be sorted by attemptedAt)\n * @param recentCount - Number of recent attempts to consider (default 10)\n * @returns Comparison between recent and overall performance\n */\nexport function getPerformanceTrend(\n  attempts: QuestionAttempt[],\n  recentCount = 10\n): {\n  recentAccuracy: number;\n  overallAccuracy: number;\n  trend: 'improving' | 'declining' | 'stable';\n  trendPercentage: number;\n} {\n  if (attempts.length === 0) {\n    return {\n      recentAccuracy: 0,\n      overallAccuracy: 0,\n      trend: 'stable',\n      trendPercentage: 0,\n    };\n  }\n\n  // Sort by attemptedAt (most recent first)\n  const sorted = [...attempts].sort(\n    (a, b) => new Date(b.attemptedAt).getTime() - new Date(a.attemptedAt).getTime()\n  );\n\n  const overallAccuracy = calculateAccuracy(attempts);\n  const recentAttempts = sorted.slice(0, Math.min(recentCount, sorted.length));\n  const recentAccuracy = calculateAccuracy(recentAttempts);\n\n  const difference = recentAccuracy - overallAccuracy;\n  const trendPercentage = Math.round(Math.abs(difference) * 100) / 100;\n\n  let trend: 'improving' | 'declining' | 'stable';\n  if (Math.abs(difference) < 5) {\n    // Within 5% considered stable\n    trend = 'stable';\n  } else if (difference > 0) {\n    trend = 'improving';\n  } else {\n    trend = 'declining';\n  }\n\n  return {\n    recentAccuracy: Math.round(recentAccuracy * 100) / 100,\n    overallAccuracy: Math.round(overallAccuracy * 100) / 100,\n    trend,\n    trendPercentage,\n  };\n}\n","/**\n * Storage utilities - Type-safe localStorage wrapper\n */\n\n/**\n * Storage error class\n */\nclass StorageError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'StorageError';\n  }\n}\n\n/**\n * Check if localStorage is available\n */\nfunction isStorageAvailable(): boolean {\n  try {\n    const test = '__storage_test__';\n    localStorage.setItem(test, test);\n    localStorage.removeItem(test);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Set an item in localStorage\n * @param key - Storage key\n * @param value - Value to store (will be JSON stringified)\n * @throws StorageError if localStorage is not available or serialization fails\n */\nexport function setItem<T>(key: string, value: T): void {\n  if (!isStorageAvailable()) {\n    console.warn('localStorage is not available');\n    throw new StorageError('localStorage is not available');\n  }\n\n  try {\n    const serialized = JSON.stringify(value);\n    localStorage.setItem(key, serialized);\n  } catch (error) {\n    console.error('Error setting item in localStorage:', error);\n    throw new StorageError(`Failed to set item with key: ${key}`);\n  }\n}\n\n/**\n * Get an item from localStorage\n * @param key - Storage key\n * @returns The stored value or null if not found\n */\nexport function getItem<T>(key: string): T | null {\n  if (!isStorageAvailable()) {\n    console.warn('localStorage is not available');\n    return null;\n  }\n\n  try {\n    const item = localStorage.getItem(key);\n    if (item === null) {\n      return null;\n    }\n    return JSON.parse(item) as T;\n  } catch (error) {\n    console.error('Error getting item from localStorage:', error);\n    return null;\n  }\n}\n\n/**\n * Get an item from localStorage with a default value\n * @param key - Storage key\n * @param defaultValue - Default value if item doesn't exist\n * @returns The stored value or default value\n */\nexport function getItemWithDefault<T>(key: string, defaultValue: T): T {\n  const item = getItem<T>(key);\n  return item !== null ? item : defaultValue;\n}\n\n/**\n * Remove an item from localStorage\n * @param key - Storage key\n */\nexport function removeItem(key: string): void {\n  if (!isStorageAvailable()) {\n    console.warn('localStorage is not available');\n    return;\n  }\n\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Error removing item from localStorage:', error);\n  }\n}\n\n/**\n * Clear all items from localStorage\n * WARNING: This will remove ALL items, including those not created by this app\n */\nexport function clearAll(): void {\n  if (!isStorageAvailable()) {\n    console.warn('localStorage is not available');\n    return;\n  }\n\n  try {\n    localStorage.clear();\n  } catch (error) {\n    console.error('Error clearing localStorage:', error);\n  }\n}\n\n/**\n * Clear all items with a specific prefix\n * @param prefix - Key prefix to match\n */\nexport function clearByPrefix(prefix: string): void {\n  if (!isStorageAvailable()) {\n    console.warn('localStorage is not available');\n    return;\n  }\n\n  try {\n    const keys = Object.keys(localStorage);\n    keys.forEach((key) => {\n      if (key.startsWith(prefix)) {\n        localStorage.removeItem(key);\n      }\n    });\n  } catch (error) {\n    console.error('Error clearing items by prefix:', error);\n  }\n}\n\n/**\n * Check if a key exists in localStorage\n * @param key - Storage key\n * @returns True if the key exists\n */\nexport function hasItem(key: string): boolean {\n  if (!isStorageAvailable()) {\n    return false;\n  }\n\n  try {\n    return localStorage.getItem(key) !== null;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Get all keys in localStorage\n * @param prefix - Optional prefix to filter keys\n * @returns Array of keys\n */\nexport function getAllKeys(prefix?: string): string[] {\n  if (!isStorageAvailable()) {\n    return [];\n  }\n\n  try {\n    const keys = Object.keys(localStorage);\n    if (prefix) {\n      return keys.filter((key) => key.startsWith(prefix));\n    }\n    return keys;\n  } catch (error) {\n    console.error('Error getting keys from localStorage:', error);\n    return [];\n  }\n}\n\n/**\n * Get storage size in bytes\n * @returns Approximate size in bytes\n */\nexport function getStorageSize(): number {\n  if (!isStorageAvailable()) {\n    return 0;\n  }\n\n  try {\n    let size = 0;\n    for (const key in localStorage) {\n      if (localStorage.hasOwnProperty(key)) {\n        size += localStorage[key].length + key.length;\n      }\n    }\n    return size;\n  } catch {\n    return 0;\n  }\n}\n\n/**\n * Get storage size in a human-readable format\n * @returns Size string (e.g., \"1.2 KB\")\n */\nexport function getStorageSizeFormatted(): string {\n  const bytes = getStorageSize();\n\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\n}\n\n/**\n * Set an item with expiration\n * @param key - Storage key\n * @param value - Value to store\n * @param expirationMs - Expiration time in milliseconds\n */\nexport function setItemWithExpiry<T>(key: string, value: T, expirationMs: number): void {\n  const item = {\n    value,\n    expiry: Date.now() + expirationMs,\n  };\n  setItem(key, item);\n}\n\n/**\n * Get an item with expiration check\n * @param key - Storage key\n * @returns The stored value or null if expired/not found\n */\nexport function getItemWithExpiry<T>(key: string): T | null {\n  const item = getItem<{ value: T; expiry: number }>(key);\n\n  if (!item) {\n    return null;\n  }\n\n  // Check if expired\n  if (Date.now() > item.expiry) {\n    removeItem(key);\n    return null;\n  }\n\n  return item.value;\n}\n\n/**\n * Safely execute a storage operation with error handling\n * @param operation - Storage operation to execute\n * @param fallback - Fallback value if operation fails\n * @returns Result of operation or fallback\n */\nexport function safeStorage<T>(operation: () => T, fallback: T): T {\n  try {\n    return operation();\n  } catch (error) {\n    console.error('Storage operation failed:', error);\n    return fallback;\n  }\n}\n\n/**\n * Storage event listener type\n */\ntype StorageListener = (key: string, newValue: any, oldValue: any) => void;\n\n/**\n * Storage change listeners\n */\nconst listeners: Map<string, Set<StorageListener>> = new Map();\n\n/**\n * Add a listener for storage changes\n * @param key - Storage key to watch\n * @param callback - Callback function\n * @returns Cleanup function to remove the listener\n */\nexport function addStorageListener(key: string, callback: StorageListener): () => void {\n  if (!listeners.has(key)) {\n    listeners.set(key, new Set());\n  }\n\n  listeners.get(key)!.add(callback);\n\n  // Return cleanup function\n  return () => {\n    listeners.get(key)?.delete(callback);\n  };\n}\n\n/**\n * Notify listeners of storage changes\n * This should be called after setItem operations\n */\nfunction notifyListeners(key: string, newValue: any, oldValue: any): void {\n  const keyListeners = listeners.get(key);\n  if (keyListeners) {\n    keyListeners.forEach((callback) => {\n      try {\n        callback(key, newValue, oldValue);\n      } catch (error) {\n        console.error('Error in storage listener:', error);\n      }\n    });\n  }\n}\n\n/**\n * Enhanced setItem with change notification\n */\nexport function setItemWithNotification<T>(key: string, value: T): void {\n  const oldValue = getItem<T>(key);\n  setItem(key, value);\n  notifyListeners(key, value, oldValue);\n}\n\n// Export the storage error class\nexport { StorageError };\n","/**\n * useLocalStorage Hook - Sync React state with localStorage\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { getItem, setItem, removeItem } from '@/utils/storage';\n\n/**\n * Custom hook to sync state with localStorage\n * @param key - Storage key\n * @param initialValue - Initial value if no stored value exists\n * @returns [value, setValue, removeValue] tuple\n *\n * @example\n * const [user, setUser, removeUser] = useLocalStorage('user', null);\n */\nexport function useLocalStorage<T>(\n  key: string,\n  initialValue: T\n): [T, (value: T | ((prev: T) => T)) => void, () => void] {\n  // State to store our value\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      // Get from local storage by key\n      const item = getItem<T>(key);\n      // Parse stored json or if none return initialValue\n      return item !== null ? item : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.error(`Error loading localStorage key \"${key}\":`, error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that\n  // persists the new value to localStorage.\n  const setValue = useCallback(\n    (value: T | ((prev: T) => T)) => {\n      try {\n        // Allow value to be a function so we have same API as useState\n        const valueToStore = value instanceof Function ? value(storedValue) : value;\n\n        // Save state\n        setStoredValue(valueToStore);\n\n        // Save to local storage\n        setItem(key, valueToStore);\n      } catch (error) {\n        console.error(`Error setting localStorage key \"${key}\":`, error);\n      }\n    },\n    [key, storedValue]\n  );\n\n  // Remove value from localStorage\n  const removeValue = useCallback(() => {\n    try {\n      removeItem(key);\n      setStoredValue(initialValue);\n    } catch (error) {\n      console.error(`Error removing localStorage key \"${key}\":`, error);\n    }\n  }, [key, initialValue]);\n\n  // Listen for changes to this key from other tabs/windows\n  useEffect(() => {\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === key && e.newValue !== null) {\n        try {\n          setStoredValue(JSON.parse(e.newValue));\n        } catch (error) {\n          console.error(`Error parsing storage event for key \"${key}\":`, error);\n        }\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n\n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n    };\n  }, [key]);\n\n  return [storedValue, setValue, removeValue];\n}\n\n/**\n * Hook for session storage (similar to useLocalStorage but uses sessionStorage)\n */\nexport function useSessionStorage<T>(\n  key: string,\n  initialValue: T\n): [T, (value: T | ((prev: T) => T)) => void, () => void] {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      const item = window.sessionStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(`Error loading sessionStorage key \"${key}\":`, error);\n      return initialValue;\n    }\n  });\n\n  const setValue = useCallback(\n    (value: T | ((prev: T) => T)) => {\n      try {\n        const valueToStore = value instanceof Function ? value(storedValue) : value;\n        setStoredValue(valueToStore);\n        window.sessionStorage.setItem(key, JSON.stringify(valueToStore));\n      } catch (error) {\n        console.error(`Error setting sessionStorage key \"${key}\":`, error);\n      }\n    },\n    [key, storedValue]\n  );\n\n  const removeValue = useCallback(() => {\n    try {\n      window.sessionStorage.removeItem(key);\n      setStoredValue(initialValue);\n    } catch (error) {\n      console.error(`Error removing sessionStorage key \"${key}\":`, error);\n    }\n  }, [key, initialValue]);\n\n  return [storedValue, setValue, removeValue];\n}\n","/**\n * useQuizSession Hook - Manage quiz session state\n */\n\nimport { useState, useCallback, useEffect, useMemo } from 'react';\nimport type { Question } from '@/types/question';\nimport { checkAnswer } from '@/utils/scorer';\nimport { useLocalStorage } from './useLocalStorage';\nimport { STORAGE_KEYS } from '@/utils/constants';\n\nexport interface QuizQuestion extends Question {\n  userAnswer?: string | null;\n  isCorrect?: boolean;\n  timeSpent?: number;\n  flaggedForReview?: boolean;\n}\n\nexport interface QuizSessionState {\n  questions: QuizQuestion[];\n  currentIndex: number;\n  startedAt: string;\n  completedAt?: string;\n}\n\nexport interface UseQuizSessionResult {\n  currentQuestion: QuizQuestion | null;\n  currentIndex: number;\n  totalQuestions: number;\n  isFirstQuestion: boolean;\n  isLastQuestion: boolean;\n  isCompleted: boolean;\n  answeredCount: number;\n  correctCount: number;\n  flaggedCount: number;\n  progress: number; // percentage\n  selectAnswer: (answerId: string) => void;\n  nextQuestion: () => void;\n  previousQuestion: () => void;\n  goToQuestion: (index: number) => void;\n  toggleFlag: () => void;\n  submitQuiz: () => void;\n  resetQuiz: () => void;\n  getQuestionAtIndex: (index: number) => QuizQuestion | null;\n  isQuestionAnswered: (index: number) => boolean;\n}\n\n/**\n * Hook to manage quiz session state and navigation\n * @param questions - Array of questions for the quiz\n * @param options - Quiz options\n * @returns Quiz session state and control functions\n *\n * @example\n * const quiz = useQuizSession(questions, { saveProgress: true });\n */\nexport function useQuizSession(\n  questions: Question[],\n  options: {\n    saveProgress?: boolean;\n    autoSave?: boolean;\n    sessionKey?: string;\n  } = {}\n): UseQuizSessionResult {\n  const { saveProgress = true, autoSave = true, sessionKey = 'default' } = options;\n\n  const storageKey = `${STORAGE_KEYS.QUIZ_STATE}_${sessionKey}`;\n\n  // Initialize quiz state\n  const [quizState, setQuizState, clearQuizState] = useLocalStorage<QuizSessionState | null>(\n    storageKey,\n    null\n  );\n\n  // Initialize questions with user answer fields\n  const [quizQuestions, setQuizQuestions] = useState<QuizQuestion[]>(() => {\n    if (quizState && quizState.questions.length === questions.length) {\n      return quizState.questions;\n    }\n    return questions.map((q) => ({\n      ...q,\n      userAnswer: null,\n      isCorrect: undefined,\n      timeSpent: 0,\n      flaggedForReview: false,\n    }));\n  });\n\n  const [currentIndex, setCurrentIndex] = useState<number>(quizState?.currentIndex || 0);\n  const [startedAt] = useState<string>(quizState?.startedAt || new Date().toISOString());\n  const [completedAt, setCompletedAt] = useState<string | undefined>(quizState?.completedAt);\n  const [questionStartTime, setQuestionStartTime] = useState<number>(Date.now());\n\n  // Update quiz questions when the questions prop changes (e.g., after async loading)\n  useEffect(() => {\n    if (questions.length > 0 && quizQuestions.length === 0) {\n      console.log(`[useQuizSession] Questions loaded: ${questions.length} questions`);\n      setQuizQuestions(\n        questions.map((q) => ({\n          ...q,\n          userAnswer: null,\n          isCorrect: undefined,\n          timeSpent: 0,\n          flaggedForReview: false,\n        }))\n      );\n      setCurrentIndex(0);\n    } else if (questions.length > 0 && questions.length !== quizQuestions.length) {\n      // Questions changed (different count), reset the quiz\n      console.log(`[useQuizSession] Questions changed: ${questions.length} questions`);\n      setQuizQuestions(\n        questions.map((q) => ({\n          ...q,\n          userAnswer: null,\n          isCorrect: undefined,\n          timeSpent: 0,\n          flaggedForReview: false,\n        }))\n      );\n      setCurrentIndex(0);\n      setCompletedAt(undefined);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [questions]);\n\n  // Save state to localStorage\n  useEffect(() => {\n    if (saveProgress && autoSave) {\n      setQuizState({\n        questions: quizQuestions,\n        currentIndex,\n        startedAt,\n        completedAt,\n      });\n    }\n  }, [quizQuestions, currentIndex, startedAt, completedAt, saveProgress, autoSave, setQuizState]);\n\n  // Track time spent on current question\n  useEffect(() => {\n    setQuestionStartTime(Date.now());\n  }, [currentIndex]);\n\n  // Update time spent when changing questions\n  const updateTimeSpent = useCallback(() => {\n    const timeSpent = Math.floor((Date.now() - questionStartTime) / 1000);\n    setQuizQuestions((prev) => {\n      const updated = [...prev];\n      if (updated[currentIndex]) {\n        updated[currentIndex] = {\n          ...updated[currentIndex],\n          timeSpent: (updated[currentIndex].timeSpent || 0) + timeSpent,\n        };\n      }\n      return updated;\n    });\n  }, [currentIndex, questionStartTime]);\n\n  // Current question\n  const currentQuestion = useMemo(() => {\n    return quizQuestions[currentIndex] || null;\n  }, [quizQuestions, currentIndex]);\n\n  // Computed values\n  const totalQuestions = quizQuestions.length;\n  const isFirstQuestion = currentIndex === 0;\n  const isLastQuestion = currentIndex === totalQuestions - 1;\n  const isCompleted = !!completedAt;\n\n  const answeredCount = useMemo(() => {\n    return quizQuestions.filter((q) => q.userAnswer !== null && q.userAnswer !== undefined).length;\n  }, [quizQuestions]);\n\n  const correctCount = useMemo(() => {\n    return quizQuestions.filter((q) => q.isCorrect === true).length;\n  }, [quizQuestions]);\n\n  const flaggedCount = useMemo(() => {\n    return quizQuestions.filter((q) => q.flaggedForReview === true).length;\n  }, [quizQuestions]);\n\n  const progress = useMemo(() => {\n    return totalQuestions > 0 ? Math.round((answeredCount / totalQuestions) * 100) : 0;\n  }, [answeredCount, totalQuestions]);\n\n  // Select an answer\n  const selectAnswer = useCallback(\n    (answerId: string) => {\n      if (isCompleted) return;\n\n      const question = quizQuestions[currentIndex];\n      if (!question) return;\n\n      const correctAnswer = question.options.find((opt) => opt.isCorrect)?.id || '';\n      const isCorrect = checkAnswer(question.id, answerId, correctAnswer);\n\n      setQuizQuestions((prev) => {\n        const updated = [...prev];\n        if (updated[currentIndex]) {\n          updated[currentIndex] = {\n            ...updated[currentIndex],\n            userAnswer: answerId,\n            isCorrect,\n          };\n        }\n        return updated;\n      });\n    },\n    [currentIndex, quizQuestions, isCompleted]\n  );\n\n  // Navigate to next question\n  const nextQuestion = useCallback(() => {\n    updateTimeSpent();\n    if (currentIndex < totalQuestions - 1) {\n      setCurrentIndex((prev) => prev + 1);\n    }\n  }, [currentIndex, totalQuestions, updateTimeSpent]);\n\n  // Navigate to previous question\n  const previousQuestion = useCallback(() => {\n    updateTimeSpent();\n    if (currentIndex > 0) {\n      setCurrentIndex((prev) => prev - 1);\n    }\n  }, [currentIndex, updateTimeSpent]);\n\n  // Go to specific question\n  const goToQuestion = useCallback(\n    (index: number) => {\n      updateTimeSpent();\n      if (index >= 0 && index < totalQuestions) {\n        setCurrentIndex(index);\n      }\n    },\n    [totalQuestions, updateTimeSpent]\n  );\n\n  // Toggle flag for review\n  const toggleFlag = useCallback(() => {\n    if (isCompleted) return;\n\n    setQuizQuestions((prev) => {\n      const updated = [...prev];\n      if (updated[currentIndex]) {\n        updated[currentIndex] = {\n          ...updated[currentIndex],\n          flaggedForReview: !updated[currentIndex].flaggedForReview,\n        };\n      }\n      return updated;\n    });\n  }, [currentIndex, isCompleted]);\n\n  // Submit quiz\n  const submitQuiz = useCallback(() => {\n    updateTimeSpent();\n    setCompletedAt(new Date().toISOString());\n  }, [updateTimeSpent]);\n\n  // Reset quiz\n  const resetQuiz = useCallback(() => {\n    setQuizQuestions(\n      questions.map((q) => ({\n        ...q,\n        userAnswer: null,\n        isCorrect: undefined,\n        timeSpent: 0,\n        flaggedForReview: false,\n      }))\n    );\n    setCurrentIndex(0);\n    setCompletedAt(undefined);\n    clearQuizState();\n  }, [questions, clearQuizState]);\n\n  // Get question at specific index\n  const getQuestionAtIndex = useCallback(\n    (index: number): QuizQuestion | null => {\n      return quizQuestions[index] || null;\n    },\n    [quizQuestions]\n  );\n\n  // Check if question is answered\n  const isQuestionAnswered = useCallback(\n    (index: number): boolean => {\n      const question = quizQuestions[index];\n      return question ? question.userAnswer !== null && question.userAnswer !== undefined : false;\n    },\n    [quizQuestions]\n  );\n\n  return {\n    currentQuestion,\n    currentIndex,\n    totalQuestions,\n    isFirstQuestion,\n    isLastQuestion,\n    isCompleted,\n    answeredCount,\n    correctCount,\n    flaggedCount,\n    progress,\n    selectAnswer,\n    nextQuestion,\n    previousQuestion,\n    goToQuestion,\n    toggleFlag,\n    submitQuiz,\n    resetQuiz,\n    getQuestionAtIndex,\n    isQuestionAnswered,\n  };\n}\n","import React, { useMemo } from 'react';\n\nexport interface ProgressBarProps {\n  current: number;\n  total: number;\n  correct: number;\n  incorrect: number;\n  className?: string;\n}\n\nexport const ProgressBar = React.memo<ProgressBarProps>(({\n  current,\n  total,\n  correct,\n  incorrect,\n  className = '',\n}) => {\n  const progressPercentage = useMemo(() => {\n    return (current / total) * 100;\n  }, [current, total]);\n\n  const accuracy = useMemo(() => {\n    const answered = correct + incorrect;\n    if (answered === 0) return 0;\n    return Math.round((correct / answered) * 100);\n  }, [correct, incorrect]);\n\n  return (\n    <div className={`bg-white rounded-lg border border-gray-200 shadow-card p-4 ${className}`}>\n      {/* Stats Row */}\n      <div className=\"flex items-center justify-between mb-3\">\n        <div className=\"flex items-center gap-4\">\n          <div>\n            <p className=\"text-2xl font-bold text-gray-900\">\n              {current} <span className=\"text-base font-normal text-gray-500\">/ {total}</span>\n            </p>\n            <p className=\"text-xs text-gray-600\">Questions</p>\n          </div>\n\n          {(correct > 0 || incorrect > 0) && (\n            <>\n              <div className=\"h-10 w-px bg-gray-300\" />\n              <div>\n                <p className=\"text-2xl font-bold text-accent-600\">\n                  {accuracy}%\n                </p>\n                <p className=\"text-xs text-gray-600\">Accuracy</p>\n              </div>\n            </>\n          )}\n        </div>\n\n        {/* Score Breakdown */}\n        <div className=\"flex items-center gap-4 text-sm\">\n          {correct > 0 && (\n            <div className=\"flex items-center gap-1.5\">\n              <div className=\"h-3 w-3 rounded-full bg-accent-500\" />\n              <span className=\"text-gray-700\">\n                <strong className=\"font-semibold\">{correct}</strong> correct\n              </span>\n            </div>\n          )}\n          {incorrect > 0 && (\n            <div className=\"flex items-center gap-1.5\">\n              <div className=\"h-3 w-3 rounded-full bg-error-500\" />\n              <span className=\"text-gray-700\">\n                <strong className=\"font-semibold\">{incorrect}</strong> incorrect\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"relative\">\n        <div className=\"h-2 w-full bg-gray-200 rounded-full overflow-hidden\">\n          <div\n            className=\"h-full bg-gradient-to-r from-accent-500 to-accent-600 transition-all duration-500 ease-out\"\n            style={{ width: `${progressPercentage}%` }}\n            role=\"progressbar\"\n            aria-valuenow={current}\n            aria-valuemin={0}\n            aria-valuemax={total}\n            aria-label={`Progress: ${current} of ${total} questions answered`}\n          />\n        </div>\n      </div>\n    </div>\n  );\n});\n\nProgressBar.displayName = 'ProgressBar';\n","/**\n * Quiz Results Screen - Display results after completing a practice quiz\n */\n\nimport React, { useMemo } from 'react';\nimport { Card } from '../ui/Card';\nimport { Button } from '../ui/Button';\nimport type { Question, DifficultyLevel } from '@/types/question';\n\nexport interface QuizResultsScreenProps {\n  score: number;\n  totalQuestions: number;\n  questions: Question[];\n  userAnswers: Array<{\n    questionId: string;\n    userAnswer: string | null;\n    isCorrect: boolean;\n  }>;\n  onRetry: () => void;\n  onDashboard: () => void;\n}\n\ninterface DifficultyBreakdown {\n  difficulty: DifficultyLevel;\n  total: number;\n  correct: number;\n  accuracy: number;\n}\n\nexport const QuizResultsScreen = React.memo<QuizResultsScreenProps>(\n  ({ score, totalQuestions, questions, userAnswers, onRetry, onDashboard }) => {\n    // Calculate percentage\n    const percentage = useMemo(() => {\n      return totalQuestions > 0 ? Math.round((score / totalQuestions) * 100) : 0;\n    }, [score, totalQuestions]);\n\n    // Check if passed (70% or higher)\n    const passed = percentage >= 70;\n    const passingScore = 70;\n\n    // Calculate breakdown by difficulty\n    const difficultyBreakdown = useMemo((): DifficultyBreakdown[] => {\n      const breakdown: Record<DifficultyLevel, { total: number; correct: number }> = {\n        easy: { total: 0, correct: 0 },\n        medium: { total: 0, correct: 0 },\n        hard: { total: 0, correct: 0 },\n      };\n\n      questions.forEach((question, index) => {\n        const answer = userAnswers[index];\n        if (answer) {\n          breakdown[question.difficulty].total++;\n          if (answer.isCorrect) {\n            breakdown[question.difficulty].correct++;\n          }\n        }\n      });\n\n      return Object.entries(breakdown)\n        .filter(([_, stats]) => stats.total > 0)\n        .map(([difficulty, stats]) => ({\n          difficulty: difficulty as DifficultyLevel,\n          total: stats.total,\n          correct: stats.correct,\n          accuracy: Math.round((stats.correct / stats.total) * 100),\n        }));\n    }, [questions, userAnswers]);\n\n    const getDifficultyLabel = (difficulty: DifficultyLevel): string => {\n      return difficulty.charAt(0).toUpperCase() + difficulty.slice(1);\n    };\n\n    const getDifficultyColor = (difficulty: DifficultyLevel): string => {\n      switch (difficulty) {\n        case 'easy':\n          return 'text-accent-600 bg-accent-100';\n        case 'medium':\n          return 'text-warning-600 bg-warning-100';\n        case 'hard':\n          return 'text-error-600 bg-error-100';\n        default:\n          return 'text-gray-600 bg-gray-100';\n      }\n    };\n\n    return (\n      <div className=\"max-w-4xl mx-auto p-6\">\n        {/* Pass/Fail Indicator */}\n        <div className={`text-center mb-8 ${passed ? 'animate-fade-in' : ''}`}>\n          <div\n            className={`inline-flex items-center justify-center w-24 h-24 rounded-full mb-4 ${\n              passed ? 'bg-accent-100' : 'bg-warning-100'\n            }`}\n          >\n            {passed ? (\n              <svg className=\"w-16 h-16 text-accent-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n            ) : (\n              <svg\n                className=\"w-16 h-16 text-warning-600\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                />\n              </svg>\n            )}\n          </div>\n          <h1\n            className={`text-4xl font-bold mb-2 ${\n              passed ? 'text-accent-900' : 'text-warning-900'\n            }`}\n          >\n            {passed ? 'Great Job!' : 'Keep Practicing!'}\n          </h1>\n          <p className=\"text-xl text-gray-600\">\n            {passed\n              ? 'You have a strong understanding of this material.'\n              : `You need ${passingScore}% to pass. Keep studying and try again!`}\n          </p>\n        </div>\n\n        {/* Score Card */}\n        <Card variant=\"elevated\" padding=\"lg\" className=\"mb-6\">\n          <div className=\"grid md:grid-cols-2 gap-6\">\n            {/* Score */}\n            <div className=\"text-center\">\n              <p className=\"text-sm text-gray-600 mb-2\">Your Score</p>\n              <p className=\"text-5xl font-bold text-gray-900 mb-1\">\n                {score}\n                <span className=\"text-2xl text-gray-500\">/{totalQuestions}</span>\n              </p>\n              <p\n                className={`text-2xl font-semibold ${\n                  passed ? 'text-accent-600' : 'text-warning-600'\n                }`}\n              >\n                {percentage}%\n              </p>\n            </div>\n\n            {/* Passing Score */}\n            <div className=\"text-center border-l border-gray-200\">\n              <p className=\"text-sm text-gray-600 mb-2\">Required to Pass</p>\n              <p className=\"text-3xl font-bold text-gray-900 mb-1\">{passingScore}%</p>\n              <p\n                className={`text-sm font-medium ${\n                  percentage >= passingScore ? 'text-accent-600' : 'text-warning-600'\n                }`}\n              >\n                {percentage >= passingScore\n                  ? `+${(percentage - passingScore).toFixed(1)}% above`\n                  : `${(passingScore - percentage).toFixed(1)}% below`}\n              </p>\n            </div>\n          </div>\n        </Card>\n\n        {/* Difficulty Breakdown */}\n        {difficultyBreakdown.length > 0 && (\n          <Card padding=\"lg\" className=\"mb-6\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Performance by Difficulty</h2>\n            <div className=\"space-y-4\">\n              {difficultyBreakdown.map((item) => (\n                <div key={item.difficulty}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-3\">\n                      <span\n                        className={`px-3 py-1 rounded-full text-sm font-medium ${getDifficultyColor(\n                          item.difficulty\n                        )}`}\n                      >\n                        {getDifficultyLabel(item.difficulty)}\n                      </span>\n                      <p className=\"text-sm text-gray-600\">\n                        {item.correct} / {item.total} correct\n                      </p>\n                    </div>\n                    <span\n                      className={`text-sm font-semibold ${\n                        item.accuracy >= 80\n                          ? 'text-accent-600'\n                          : item.accuracy >= 60\n                          ? 'text-warning-600'\n                          : 'text-error-600'\n                      }`}\n                    >\n                      {item.accuracy}%\n                    </span>\n                  </div>\n                  <div className=\"h-2 w-full bg-gray-200 rounded-full overflow-hidden\">\n                    <div\n                      className={`h-full transition-all duration-500 ${\n                        item.accuracy >= 80\n                          ? 'bg-accent-500'\n                          : item.accuracy >= 60\n                          ? 'bg-warning-500'\n                          : 'bg-error-500'\n                      }`}\n                      style={{ width: `${item.accuracy}%` }}\n                    />\n                  </div>\n                </div>\n              ))}\n            </div>\n          </Card>\n        )}\n\n        {/* Recommendations */}\n        <Card padding=\"lg\" className=\"mb-6 bg-primary-50 border-primary-200\">\n          <div className=\"flex gap-3\">\n            <svg\n              className=\"h-6 w-6 text-primary-600 flex-shrink-0\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n            <div>\n              <h3 className=\"text-lg font-semibold text-primary-900 mb-2\">\n                {passed ? 'Next Steps' : 'How to Improve'}\n              </h3>\n              <ul className=\"text-sm text-primary-800 space-y-1\">\n                {passed ? (\n                  <>\n                    <li>Continue practicing to reinforce your knowledge</li>\n                    <li>Try a full mock exam to test under exam conditions</li>\n                    <li>Review areas where you scored below 80%</li>\n                  </>\n                ) : (\n                  <>\n                    <li>Review the explanations for questions you got wrong</li>\n                    <li>Focus on areas where your accuracy is below 60%</li>\n                    <li>Practice more questions in your weak areas</li>\n                    <li>Try the quiz again to track your improvement</li>\n                  </>\n                )}\n              </ul>\n            </div>\n          </div>\n        </Card>\n\n        {/* Actions */}\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          <Button\n            variant=\"primary\"\n            size=\"lg\"\n            fullWidth\n            onClick={onRetry}\n            leftIcon={\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n                />\n              </svg>\n            }\n          >\n            Try Again\n          </Button>\n          <Button\n            variant=\"secondary\"\n            size=\"lg\"\n            fullWidth\n            onClick={onDashboard}\n            leftIcon={\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\n                />\n              </svg>\n            }\n          >\n            Back to Dashboard\n          </Button>\n        </div>\n\n        {/* Celebration Animation */}\n        {passed && (\n          <div className=\"fixed inset-0 pointer-events-none flex items-center justify-center z-50\">\n            <div className=\"text-8xl animate-bounce\">ðŸŽ‰</div>\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nQuizResultsScreen.displayName = 'QuizResultsScreen';\n","/**\n * Quiz Page - Practice quiz with random questions\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport { loadExamQuestions } from '@/lib/questionLoader';\nimport { shuffleQuestions } from '@/utils/questionRandomizer';\nimport { useQuizSession } from '@/hooks/useQuizSession';\nimport { useAuth } from '@/contexts/AuthContext';\nimport type { Question } from '@/types/question';\nimport { QuestionCard, ProgressBar, QuizResultsScreen } from '@/components/quiz';\nimport { Button, Spinner, Card } from '@/components/ui';\nimport { saveQuestionAttempt } from '@/utils/progressTracker';\n\n/**\n * Transform Question to match QuestionCard format\n */\nfunction transformQuestionForCard(question: Question) {\n  return {\n    id: question.id,\n    question: question.questionText,\n    options: {\n      A: question.options.find((opt) => opt.id === 'A')?.text || '',\n      B: question.options.find((opt) => opt.id === 'B')?.text || '',\n      C: question.options.find((opt) => opt.id === 'C')?.text || '',\n      D: question.options.find((opt) => opt.id === 'D')?.text || '',\n    },\n    correctAnswer: question.options.find((opt) => opt.isCorrect)?.id || 'A',\n    explanation: question.explanation || 'No explanation available.',\n    difficulty: question.difficulty,\n    unitTitle: question.unitId,\n    chapterTitle: question.chapterId,\n  };\n}\n\nexport function QuizPage() {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const { user, isConfigured } = useAuth();\n\n  // Get exam type from URL params\n  const examSlug = searchParams.get('exam') || 'door-supervisor';\n  const questionCount = parseInt(searchParams.get('count') || '20', 10);\n  const unitFilter = searchParams.get('unit'); // e.g., \"U1\"\n  const chapterFilter = searchParams.get('chapter'); // e.g., \"1.1\"\n\n  // State\n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [hasCheckedAnswer, setHasCheckedAnswer] = useState(false);\n  const [showResults, setShowResults] = useState(false);\n\n  // Quiz session hook - include unit/chapter in session key for separate tracking\n  const sessionKey = `quiz-${examSlug}${unitFilter ? `-${unitFilter}` : ''}${chapterFilter ? `-${chapterFilter}` : ''}`;\n  const quiz = useQuizSession(questions, {\n    saveProgress: true,\n    autoSave: true,\n    sessionKey,\n  });\n\n  // Load questions on mount\n  useEffect(() => {\n    async function loadQuestions() {\n      try {\n        console.log(`[QuizPage] Starting to load questions for exam: ${examSlug}, count: ${questionCount}`);\n        setLoading(true);\n        setError(null);\n\n        // Load all questions for the exam\n        const allQuestions = await loadExamQuestions(\n          examSlug as 'door-supervisor' | 'security-guard' | 'cctv-operator' | 'close-protection'\n        );\n\n        console.log(`[QuizPage] Loaded ${allQuestions.length} total questions`);\n\n        if (allQuestions.length === 0) {\n          throw new Error('No questions found for this exam');\n        }\n\n        // Filter by unit and/or chapter if specified\n        let filteredQuestions = allQuestions;\n\n        if (unitFilter) {\n          filteredQuestions = filteredQuestions.filter((q) => q.unitId === unitFilter);\n          console.log(`[QuizPage] Filtered to ${filteredQuestions.length} questions for unit ${unitFilter}`);\n        }\n\n        if (chapterFilter) {\n          filteredQuestions = filteredQuestions.filter((q) => q.chapterId === chapterFilter);\n          console.log(`[QuizPage] Filtered to ${filteredQuestions.length} questions for chapter ${chapterFilter}`);\n        }\n\n        if (filteredQuestions.length === 0) {\n          throw new Error('No questions found for the selected unit/chapter');\n        }\n\n        // Shuffle and select random questions\n        const shuffled = shuffleQuestions(filteredQuestions);\n        const selected = shuffled.slice(0, Math.min(questionCount, shuffled.length));\n\n        console.log(`[QuizPage] Selected ${selected.length} questions for quiz`);\n        setQuestions(selected);\n        console.log(`[QuizPage] Questions state updated successfully`);\n      } catch (err) {\n        console.error('[QuizPage] Error loading questions:', err);\n        setError(\n          err instanceof Error ? err.message : 'Failed to load questions. Please try again.'\n        );\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    loadQuestions();\n  }, [examSlug, questionCount, unitFilter, chapterFilter]);\n\n  // Debug logging for current question state (moved here to comply with Rules of Hooks)\n  useEffect(() => {\n    console.log(`[QuizPage] Current question updated:`, {\n      hasQuestion: !!quiz.currentQuestion,\n      questionId: quiz.currentQuestion?.id,\n      totalQuestions: quiz.totalQuestions,\n      currentIndex: quiz.currentIndex,\n    });\n  }, [quiz.currentQuestion, quiz.totalQuestions, quiz.currentIndex]);\n\n  // Handle answer selection\n  const handleAnswerSelect = useCallback(\n    (answerId: string) => {\n      if (!hasCheckedAnswer) {\n        quiz.selectAnswer(answerId);\n      }\n    },\n    [hasCheckedAnswer, quiz]\n  );\n\n  // Handle check answer\n  const handleCheckAnswer = useCallback(async () => {\n    if (!quiz.currentQuestion || !quiz.currentQuestion.userAnswer) {\n      return;\n    }\n\n    setHasCheckedAnswer(true);\n\n    // Save progress to Supabase if user is logged in and Supabase is configured\n    if (user && isConfigured && quiz.currentQuestion.userAnswer) {\n      try {\n        await saveQuestionAttempt(user.id, {\n          questionId: quiz.currentQuestion.id,\n          unitId: quiz.currentQuestion.unitId,\n          chapterId: quiz.currentQuestion.chapterId,\n          difficulty: quiz.currentQuestion.difficulty,\n          userAnswer: quiz.currentQuestion.userAnswer,\n          correctAnswer: quiz.currentQuestion.options.find((opt) => opt.isCorrect)?.id || '',\n          isCorrect: quiz.currentQuestion.isCorrect || false,\n          timeSpent: quiz.currentQuestion.timeSpent || 0,\n          attemptedAt: new Date().toISOString(),\n        });\n      } catch (error) {\n        console.error('Error saving question attempt:', error);\n        // Don't show error to user - this is non-critical\n      }\n    }\n  }, [quiz.currentQuestion, user, isConfigured]);\n\n  // Handle next question\n  const handleNextQuestion = useCallback(() => {\n    setHasCheckedAnswer(false);\n    quiz.nextQuestion();\n  }, [quiz]);\n\n  // Handle previous question\n  const handlePreviousQuestion = useCallback(() => {\n    const previousQuestion = quiz.getQuestionAtIndex(quiz.currentIndex - 1);\n    const wasAnswered = previousQuestion?.userAnswer !== null && previousQuestion?.userAnswer !== undefined;\n    setHasCheckedAnswer(wasAnswered);\n    quiz.previousQuestion();\n  }, [quiz]);\n\n  // Handle finish quiz\n  const handleFinishQuiz = useCallback(() => {\n    quiz.submitQuiz();\n    setShowResults(true);\n  }, [quiz]);\n\n  // Handle retry quiz\n  const handleRetryQuiz = useCallback(() => {\n    quiz.resetQuiz();\n    setHasCheckedAnswer(false);\n    setShowResults(false);\n  }, [quiz]);\n\n  // Handle go back to exam\n  const handleGoBack = useCallback(() => {\n    const exam = searchParams.get('exam');\n    navigate(exam ? `/exam/${exam}` : '/');\n  }, [navigate, searchParams]);\n\n  // Loading state\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <Spinner size=\"lg\" color=\"primary\" />\n          <p className=\"mt-4 text-gray-600\">Loading questions...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center px-4\">\n        <Card padding=\"lg\" className=\"max-w-md w-full text-center\">\n          <div className=\"mb-4\">\n            <svg\n              className=\"mx-auto h-12 w-12 text-error-500\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n          </div>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">Error Loading Questions</h2>\n          <p className=\"text-gray-600 mb-6\">{error}</p>\n          <Button variant=\"primary\" onClick={() => window.location.reload()}>\n            Try Again\n          </Button>\n        </Card>\n      </div>\n    );\n  }\n\n  // No questions state\n  if (questions.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center px-4\">\n        <Card padding=\"lg\" className=\"max-w-md w-full text-center\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">No Questions Available</h2>\n          <p className=\"text-gray-600 mb-6\">\n            There are no questions available for this quiz. Please try a different exam or contact\n            support.\n          </p>\n          <Button variant=\"primary\" onClick={handleGoBack}>\n            Back to Exam\n          </Button>\n        </Card>\n      </div>\n    );\n  }\n\n  // Results screen\n  if (showResults) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8\">\n        <QuizResultsScreen\n          score={quiz.correctCount}\n          totalQuestions={quiz.totalQuestions}\n          questions={quiz.getQuestionAtIndex(0) ? questions : []}\n          userAnswers={questions.map((_, index) => {\n            const q = quiz.getQuestionAtIndex(index);\n            return {\n              questionId: q?.id || '',\n              userAnswer: q?.userAnswer || null,\n              isCorrect: q?.isCorrect || false,\n            };\n          })}\n          onRetry={handleRetryQuiz}\n          onDashboard={handleGoBack}\n        />\n      </div>\n    );\n  }\n\n  // Current question\n  const currentQuestion = quiz.currentQuestion;\n\n  if (!currentQuestion) {\n    console.warn('[QuizPage] No current question available - showing fallback message');\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <p className=\"text-gray-600\">No question available</p>\n      </div>\n    );\n  }\n\n  const transformedQuestion = transformQuestionForCard(currentQuestion);\n  const isAnswered = currentQuestion.userAnswer !== null && currentQuestion.userAnswer !== undefined;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"container mx-auto px-4 max-w-5xl\">\n        {/* Header */}\n        <div className=\"mb-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">Practice Quiz</h1>\n              <p className=\"text-gray-600 mt-1\">\n                {examSlug\n                  .split('-')\n                  .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n                  .join(' ')}{' '}\n                Exam\n                {unitFilter && (\n                  <span className=\"ml-2\">\n                    - {unitFilter}\n                    {chapterFilter && <span> / Chapter {chapterFilter}</span>}\n                  </span>\n                )}\n              </p>\n            </div>\n            <Button variant=\"ghost\" onClick={handleGoBack}>\n              Exit Quiz\n            </Button>\n          </div>\n\n          {/* Progress Bar */}\n          <ProgressBar\n            current={quiz.currentIndex + 1}\n            total={quiz.totalQuestions}\n            correct={quiz.correctCount}\n            incorrect={quiz.answeredCount - quiz.correctCount}\n          />\n        </div>\n\n        {/* Question Card */}\n        <QuestionCard\n          questionNumber={quiz.currentIndex + 1}\n          totalQuestions={quiz.totalQuestions}\n          question={transformedQuestion}\n          selectedAnswer={currentQuestion.userAnswer || null}\n          onAnswerSelect={handleAnswerSelect}\n          showResult={hasCheckedAnswer}\n          isCorrect={currentQuestion.isCorrect || false}\n          isBookmarked={currentQuestion.flaggedForReview}\n          onBookmarkToggle={quiz.toggleFlag}\n          disabled={hasCheckedAnswer}\n        />\n\n        {/* Action Buttons */}\n        <div className=\"mt-6 flex items-center justify-between gap-4\">\n          <Button\n            variant=\"ghost\"\n            onClick={handlePreviousQuestion}\n            disabled={quiz.isFirstQuestion}\n            leftIcon={\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M15 19l-7-7 7-7\"\n                />\n              </svg>\n            }\n          >\n            Previous\n          </Button>\n\n          <div className=\"flex gap-3\">\n            {!hasCheckedAnswer && isAnswered && (\n              <Button variant=\"primary\" onClick={handleCheckAnswer}>\n                Check Answer\n              </Button>\n            )}\n\n            {hasCheckedAnswer && !quiz.isLastQuestion && (\n              <Button variant=\"primary\" onClick={handleNextQuestion}>\n                Next Question\n              </Button>\n            )}\n\n            {hasCheckedAnswer && quiz.isLastQuestion && (\n              <Button variant=\"success\" onClick={handleFinishQuiz}>\n                Finish Quiz\n              </Button>\n            )}\n          </div>\n\n          <Button\n            variant=\"ghost\"\n            onClick={handleNextQuestion}\n            disabled={quiz.isLastQuestion || !hasCheckedAnswer}\n            rightIcon={\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n              </svg>\n            }\n          >\n            Next\n          </Button>\n        </div>\n\n        {/* Quiz Status */}\n        <div className=\"mt-6 text-center text-sm text-gray-600\">\n          <p>\n            {quiz.answeredCount} of {quiz.totalQuestions} questions answered\n            {quiz.answeredCount > 0 && (\n              <span className=\"ml-2\">\n                ({quiz.correctCount} correct, {quiz.answeredCount - quiz.correctCount} incorrect)\n              </span>\n            )}\n          </p>\n          {quiz.flaggedCount > 0 && (\n            <p className=\"mt-1\">\n              {quiz.flaggedCount} question{quiz.flaggedCount > 1 ? 's' : ''} bookmarked for review\n            </p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["checkAnswer","questionId","userAnswer","correctAnswer","normalizedUserAnswer","normalizedCorrectAnswer","StorageError","message","isStorageAvailable","test","setItem","key","value","serialized","error","getItem","item","removeItem","useLocalStorage","initialValue","storedValue","setStoredValue","useState","setValue","useCallback","valueToStore","removeValue","useEffect","handleStorageChange","e","useQuizSession","questions","options","saveProgress","autoSave","sessionKey","storageKey","STORAGE_KEYS","quizState","setQuizState","clearQuizState","quizQuestions","setQuizQuestions","q","currentIndex","setCurrentIndex","startedAt","completedAt","setCompletedAt","questionStartTime","setQuestionStartTime","updateTimeSpent","timeSpent","prev","updated","currentQuestion","useMemo","totalQuestions","isFirstQuestion","isLastQuestion","isCompleted","answeredCount","correctCount","flaggedCount","progress","selectAnswer","answerId","question","_a","opt","isCorrect","nextQuestion","previousQuestion","goToQuestion","index","toggleFlag","submitQuiz","resetQuiz","getQuestionAtIndex","isQuestionAnswered","ProgressBar","React","current","total","correct","incorrect","className","progressPercentage","accuracy","answered","jsxs","jsx","Fragment","QuizResultsScreen","score","userAnswers","onRetry","onDashboard","percentage","passed","passingScore","difficultyBreakdown","breakdown","answer","_","stats","difficulty","getDifficultyLabel","getDifficultyColor","Card","Button","transformQuestionForCard","_b","_c","_d","_e","QuizPage","searchParams","useSearchParams","navigate","useNavigate","user","isConfigured","useAuth","examSlug","questionCount","unitFilter","chapterFilter","setQuestions","loading","setLoading","setError","hasCheckedAnswer","setHasCheckedAnswer","showResults","setShowResults","quiz","loadQuestions","allQuestions","loadExamQuestions","filteredQuestions","shuffled","shuffleQuestions","selected","err","handleAnswerSelect","handleCheckAnswer","saveQuestionAttempt","handleNextQuestion","handlePreviousQuestion","wasAnswered","handleFinishQuiz","handleRetryQuiz","handleGoBack","exam","Spinner","transformedQuestion","isAnswered","word","QuestionCard"],"mappings":"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"}