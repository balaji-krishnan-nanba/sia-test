{"version":3,"file":"MockExamPage-Co1QhE_Y.js","sources":["../../src/components/mock-exam/Timer.tsx","../../src/components/mock-exam/ResultsScreen.tsx","../../src/pages/MockExamPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\n\nexport interface TimerProps {\n  duration: number; // in seconds\n  onTimeUp: () => void;\n  isRunning: boolean;\n  onPause?: () => void;\n  onResume?: () => void;\n  showControls?: boolean;\n}\n\nexport const Timer = React.memo<TimerProps>(({\n  duration,\n  onTimeUp,\n  isRunning,\n  onPause,\n  onResume,\n  showControls = true,\n}) => {\n  const [timeRemaining, setTimeRemaining] = useState(duration);\n  const [isPaused, setIsPaused] = useState(!isRunning);\n\n  useEffect(() => {\n    setTimeRemaining(duration);\n  }, [duration]);\n\n  useEffect(() => {\n    setIsPaused(!isRunning);\n  }, [isRunning]);\n\n  useEffect(() => {\n    if (isPaused || timeRemaining <= 0) return;\n\n    const interval = setInterval(() => {\n      setTimeRemaining((prev) => {\n        if (prev <= 1) {\n          onTimeUp();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [isPaused, timeRemaining, onTimeUp]);\n\n  const formattedTime = useMemo(() => {\n    const minutes = Math.floor(timeRemaining / 60);\n    const seconds = timeRemaining % 60;\n    return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n  }, [timeRemaining]);\n\n  const percentage = useMemo(() => {\n    return (timeRemaining / duration) * 100;\n  }, [timeRemaining, duration]);\n\n  const colorClass = useMemo(() => {\n    if (timeRemaining <= 60) return 'text-error-600'; // Critical: < 1 min\n    if (timeRemaining <= 300) return 'text-warning-600'; // Warning: < 5 min\n    return 'text-secondary-600'; // Normal\n  }, [timeRemaining]);\n\n  const bgColorClass = useMemo(() => {\n    if (timeRemaining <= 60) return 'bg-error-50 border-error-300';\n    if (timeRemaining <= 300) return 'bg-warning-50 border-warning-300';\n    return 'bg-secondary-50 border-secondary-300';\n  }, [timeRemaining]);\n\n  const handlePauseResume = useCallback(() => {\n    if (isPaused) {\n      setIsPaused(false);\n      onResume?.();\n    } else {\n      setIsPaused(true);\n      onPause?.();\n    }\n  }, [isPaused, onPause, onResume]);\n\n  // Alert when time is running out\n  useEffect(() => {\n    if (timeRemaining === 60) {\n      // Show browser notification if permitted\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification('Time Warning', {\n          body: 'Only 1 minute remaining!',\n          icon: '/favicon.ico',\n        });\n      }\n    }\n  }, [timeRemaining]);\n\n  return (\n    <div className={`rounded-lg border-2 p-4 transition-colors ${bgColorClass}`}>\n      <div className=\"flex items-center justify-between\">\n        {/* Timer Display */}\n        <div className=\"flex items-center gap-3\">\n          <svg className=\"h-6 w-6 text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <div>\n            <p className={`text-3xl font-bold font-mono ${colorClass}`}>\n              {formattedTime}\n            </p>\n            <p className=\"text-xs text-gray-600\">\n              {timeRemaining <= 60 ? 'Hurry up!' : timeRemaining <= 300 ? 'Time running out' : 'Time remaining'}\n            </p>\n          </div>\n        </div>\n\n        {/* Controls */}\n        {showControls && onPause && onResume && (\n          <button\n            onClick={handlePauseResume}\n            className=\"p-2 rounded-md hover:bg-white/50 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors\"\n            aria-label={isPaused ? 'Resume timer' : 'Pause timer'}\n          >\n            {isPaused ? (\n              <svg className=\"h-6 w-6 text-gray-700\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z\" clipRule=\"evenodd\" />\n              </svg>\n            ) : (\n              <svg className=\"h-6 w-6 text-gray-700\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n              </svg>\n            )}\n          </button>\n        )}\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"mt-3\">\n        <div className=\"h-1.5 w-full bg-gray-200 rounded-full overflow-hidden\">\n          <div\n            className={`h-full transition-all duration-1000 ${\n              timeRemaining <= 60\n                ? 'bg-error-500'\n                : timeRemaining <= 300\n                ? 'bg-warning-500'\n                : 'bg-secondary-500'\n            }`}\n            style={{ width: `${percentage}%` }}\n            role=\"progressbar\"\n            aria-valuenow={timeRemaining}\n            aria-valuemin={0}\n            aria-valuemax={duration}\n            aria-label=\"Time remaining\"\n          />\n        </div>\n      </div>\n\n      {isPaused && (\n        <p className=\"mt-2 text-sm text-center text-gray-600 font-medium\">\n          Timer Paused\n        </p>\n      )}\n    </div>\n  );\n});\n\nTimer.displayName = 'Timer';\n","import React, { useMemo } from 'react';\nimport { Card } from '../ui/Card';\nimport { Button } from '../ui/Button';\n\nexport interface UnitBreakdown {\n  unitNumber: number;\n  unitTitle: string;\n  totalQuestions: number;\n  correctAnswers: number;\n  accuracy: number;\n}\n\nexport interface ResultsScreenProps {\n  score: number;\n  totalQuestions: number;\n  percentage: number;\n  passed: boolean;\n  passingScore: number;\n  timeUsed: number; // in seconds\n  timeLimit: number; // in seconds\n  unitBreakdown: UnitBreakdown[];\n  onReviewAnswers: () => void;\n  onRetake: () => void;\n  onDashboard: () => void;\n  showCelebration?: boolean;\n}\n\nexport const ResultsScreen = React.memo<ResultsScreenProps>(({\n  score,\n  totalQuestions,\n  percentage,\n  passed,\n  passingScore,\n  timeUsed,\n  timeLimit,\n  unitBreakdown,\n  onReviewAnswers,\n  onRetake,\n  onDashboard,\n  showCelebration = true,\n}) => {\n  const formatTime = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}m ${secs}s`;\n  };\n\n  const averageTimePerQuestion = useMemo(() => {\n    return Math.round(timeUsed / totalQuestions);\n  }, [timeUsed, totalQuestions]);\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-6\">\n      {/* Pass/Fail Indicator */}\n      <div\n        className={`text-center mb-8 ${\n          passed ? 'animate-fade-in' : ''\n        }`}\n      >\n        <div\n          className={`inline-flex items-center justify-center w-24 h-24 rounded-full mb-4 ${\n            passed ? 'bg-accent-100' : 'bg-error-100'\n          }`}\n        >\n          {passed ? (\n            <svg className=\"w-16 h-16 text-accent-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path\n                fillRule=\"evenodd\"\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n          ) : (\n            <svg className=\"w-16 h-16 text-error-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path\n                fillRule=\"evenodd\"\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n          )}\n        </div>\n        <h1\n          className={`text-4xl font-bold mb-2 ${\n            passed ? 'text-accent-900' : 'text-error-900'\n          }`}\n        >\n          {passed ? 'Congratulations!' : 'Not Quite There'}\n        </h1>\n        <p className=\"text-xl text-gray-600\">\n          {passed\n            ? 'You passed the mock exam!'\n            : `You need ${passingScore}% to pass. Keep practicing!`}\n        </p>\n      </div>\n\n      {/* Score Card */}\n      <Card variant=\"elevated\" padding=\"lg\" className=\"mb-6\">\n        <div className=\"grid md:grid-cols-3 gap-6\">\n          {/* Score */}\n          <div className=\"text-center\">\n            <p className=\"text-sm text-gray-600 mb-2\">Your Score</p>\n            <p className=\"text-5xl font-bold text-gray-900 mb-1\">\n              {score}<span className=\"text-2xl text-gray-500\">/{totalQuestions}</span>\n            </p>\n            <p\n              className={`text-2xl font-semibold ${\n                passed ? 'text-accent-600' : 'text-error-600'\n              }`}\n            >\n              {percentage}%\n            </p>\n          </div>\n\n          {/* Time */}\n          <div className=\"text-center border-l border-r border-gray-200\">\n            <p className=\"text-sm text-gray-600 mb-2\">Time Used</p>\n            <p className=\"text-3xl font-bold text-gray-900 mb-1\">\n              {formatTime(timeUsed)}\n            </p>\n            <p className=\"text-sm text-gray-500\">\n              of {formatTime(timeLimit)} available\n            </p>\n            <p className=\"text-xs text-gray-500 mt-2\">\n              Avg: {averageTimePerQuestion}s per question\n            </p>\n          </div>\n\n          {/* Passing Score */}\n          <div className=\"text-center\">\n            <p className=\"text-sm text-gray-600 mb-2\">Required to Pass</p>\n            <p className=\"text-3xl font-bold text-gray-900 mb-1\">{passingScore}%</p>\n            <p\n              className={`text-sm font-medium ${\n                percentage >= passingScore ? 'text-accent-600' : 'text-error-600'\n              }`}\n            >\n              {percentage >= passingScore\n                ? `+${(percentage - passingScore).toFixed(1)}% above`\n                : `${(passingScore - percentage).toFixed(1)}% below`}\n            </p>\n          </div>\n        </div>\n      </Card>\n\n      {/* Unit Breakdown */}\n      <Card padding=\"lg\" className=\"mb-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Performance by Unit</h2>\n        <div className=\"space-y-4\">\n          {unitBreakdown.map((unit) => (\n            <div key={unit.unitNumber}>\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"flex-1\">\n                  <p className=\"text-sm font-medium text-gray-900\">\n                    Unit {unit.unitNumber}: {unit.unitTitle}\n                  </p>\n                  <p className=\"text-xs text-gray-600\">\n                    {unit.correctAnswers} / {unit.totalQuestions} correct\n                  </p>\n                </div>\n                <span\n                  className={`text-sm font-semibold ${\n                    unit.accuracy >= 80\n                      ? 'text-accent-600'\n                      : unit.accuracy >= 60\n                      ? 'text-warning-600'\n                      : 'text-error-600'\n                  }`}\n                >\n                  {unit.accuracy}%\n                </span>\n              </div>\n              <div className=\"h-2 w-full bg-gray-200 rounded-full overflow-hidden\">\n                <div\n                  className={`h-full transition-all duration-500 ${\n                    unit.accuracy >= 80\n                      ? 'bg-accent-500'\n                      : unit.accuracy >= 60\n                      ? 'bg-warning-500'\n                      : 'bg-error-500'\n                  }`}\n                  style={{ width: `${unit.accuracy}%` }}\n                />\n              </div>\n            </div>\n          ))}\n        </div>\n      </Card>\n\n      {/* Actions */}\n      <div className=\"grid md:grid-cols-3 gap-4\">\n        <Button\n          variant=\"primary\"\n          size=\"lg\"\n          fullWidth\n          onClick={onReviewAnswers}\n          leftIcon={\n            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n            </svg>\n          }\n        >\n          Review Answers\n        </Button>\n        <Button\n          variant=\"secondary\"\n          size=\"lg\"\n          fullWidth\n          onClick={onRetake}\n          leftIcon={\n            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n            </svg>\n          }\n        >\n          Retake Exam\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"lg\"\n          fullWidth\n          onClick={onDashboard}\n          leftIcon={\n            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n            </svg>\n          }\n        >\n          Back to Dashboard\n        </Button>\n      </div>\n\n      {/* Celebration Animation */}\n      {passed && showCelebration && (\n        <div className=\"fixed inset-0 pointer-events-none flex items-center justify-center z-50\">\n          <div className=\"text-8xl animate-bounce\">ðŸŽ‰</div>\n        </div>\n      )}\n    </div>\n  );\n});\n\nResultsScreen.displayName = 'ResultsScreen';\n","/**\n * Mock Exam Page - Exam-paper-based examination experience matching real SIA exams\n *\n * Features:\n * - Pre-exam instructions screen\n * - Exam-paper-based mock tests matching official SIA specifications:\n *\n *   DOOR SUPERVISOR (60 MCQs, 90 min total):\n *   - Exam 1: Units 1 & 3 (40 questions, 60 min, 70% pass)\n *   - Exam 2: Unit 2 (20 questions, 30 min, 70% pass)\n *\n *   SECURITY GUARD (40 MCQs, 60 min total):\n *   - Exam 1: Units 1 & 3 (20 questions, 30 min, 70% pass)\n *   - Exam 2: Unit 2 (20 questions, 30 min, 70% pass)\n *\n *   CCTV OPERATOR (40 MCQs, 60 min total):\n *   - Exam 1: Unit 1 (20 questions, 30 min, 70% pass)\n *   - Exam 2: Unit 2 (20 questions, 30 min, 70% pass)\n *\n *   CLOSE PROTECTION (132 MCQs, 200 min total):\n *   - Exam 1: Unit 1 (52 questions, 80 min, 70% pass)\n *   - Exam 2: Unit 2 (30 questions, 45 min, 70% pass)\n *   - Exam 3: Unit 3 (20 questions, 30 min, 70% pass)\n *   - Exam 4: Unit 7 (30 questions, 45 min, 80% pass)\n *\n * - Question navigator with status indicators\n * - Flag for review functionality\n * - Submit confirmation\n * - Detailed results breakdown\n * - Review mode to see all answers\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useNavigate, useSearchParams, useParams } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { generateMockExam } from '@/utils/questionRandomizer';\nimport { saveMockExamResult } from '@/utils/progressTracker';\nimport { generateMockTestSeed } from '@/utils/seededRandom';\nimport { saveMockTestResult } from '@/utils/mockTestProgress';\nimport { EXAM_DETAILS, type ExamSlug, type ExamPaperSpec } from '@/utils/constants';\nimport { Timer } from '@/components/mock-exam/Timer';\nimport { ResultsScreen, UnitBreakdown } from '@/components/mock-exam/ResultsScreen';\nimport { QuestionCard } from '@/components/quiz/QuestionCard';\nimport { QuestionNavigator, QuestionStatus } from '@/components/quiz/QuestionNavigator';\nimport { Button } from '@/components/ui/Button';\nimport { Modal } from '@/components/ui/Modal';\nimport { Card } from '@/components/ui/Card';\nimport { Spinner } from '@/components/ui/Spinner';\nimport type { Question, SIAQualification } from '@/types/question';\n\ntype ExamState = 'pre-exam' | 'in-progress' | 'completed' | 'review';\n\n/**\n * Exam configuration returned by getExamConfig\n */\ninterface ExamConfig {\n  totalQuestions: number;\n  timeLimitSeconds: number;\n  timeLimitMinutes: number;\n  passingScore: number;\n  examName: string;\n  examCode: string;\n  examPaper: ExamPaperSpec | null; // The specific exam paper (null if full exam)\n  examPaperName: string;\n  unitsCovered: number[];\n  isFullExam: boolean;\n}\n\n/**\n * Get exam configuration based on exam slug and test number\n * Uses real SIA exam specifications for each qualification\n *\n * testNumber maps to exam papers:\n * - testNumber 1 = Exam Paper 1\n * - testNumber 2 = Exam Paper 2\n * - etc.\n * - No testNumber or testNumber 0 = Full exam (all papers combined)\n */\nfunction getExamConfig(examSlug: string, testNumber: number | null): ExamConfig {\n  const validSlug = (examSlug in EXAM_DETAILS ? examSlug : 'door-supervisor') as ExamSlug;\n  const examDetails = EXAM_DETAILS[validSlug];\n\n  // If testNumber is provided and valid, use specific exam paper\n  if (testNumber && testNumber > 0 && testNumber <= examDetails.examPapers.length) {\n    // Safe to use non-null assertion as we've verified the index is valid\n    const examPaper = examDetails.examPapers[testNumber - 1]!;\n    return {\n      totalQuestions: examPaper.questions,\n      timeLimitSeconds: examPaper.timeMinutes * 60,\n      timeLimitMinutes: examPaper.timeMinutes,\n      passingScore: examPaper.passingScore,\n      examName: examDetails.name,\n      examCode: examDetails.code,\n      examPaper: examPaper,\n      examPaperName: examPaper.examName,\n      unitsCovered: examPaper.unitsCovered,\n      isFullExam: false,\n    };\n  }\n\n  // Otherwise, return full exam configuration (all papers combined)\n  return {\n    totalQuestions: examDetails.totalMcqQuestions,\n    timeLimitSeconds: examDetails.totalTimeMinutes * 60,\n    timeLimitMinutes: examDetails.totalTimeMinutes,\n    passingScore: 70, // Standard pass mark for full exam\n    examName: examDetails.name,\n    examCode: examDetails.code,\n    examPaper: null,\n    examPaperName: 'Full Exam',\n    unitsCovered: examDetails.examPapers.flatMap(p => p.unitsCovered),\n    isFullExam: true,\n  };\n}\n\ninterface ExamAnswer {\n  questionId: string;\n  selectedAnswer: string | null;\n  timeSpent: number;\n  flagged: boolean;\n}\n\n\nexport function MockExamPage() {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const params = useParams<{ examSlug?: string; testNumber?: string }>();\n  const { user } = useAuth();\n\n  // Get exam type from URL params (supports both old and new route patterns)\n  // New pattern: /exam/:examSlug/mock/:testNumber\n  // Old pattern: /mock-exam?exam=door-supervisor\n  const examSlug = params.examSlug || searchParams.get('exam') || 'door-supervisor';\n  const testNumberStr = params.testNumber || searchParams.get('testNumber');\n  const testNumber = testNumberStr ? parseInt(testNumberStr, 10) : null;\n\n  // Get exam-specific configuration (questions, time, passing score)\n  const examConfig = useMemo(() => getExamConfig(examSlug, testNumber), [examSlug, testNumber]);\n  const {\n    totalQuestions,\n    timeLimitSeconds,\n    timeLimitMinutes,\n    passingScore,\n    examName,\n    examCode,\n    examPaperName,\n    unitsCovered,\n    isFullExam,\n  } = examConfig;\n\n  // Exam state\n  const [examState, setExamState] = useState<ExamState>('pre-exam');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Questions and answers\n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [answers, setAnswers] = useState<Map<string, ExamAnswer>>(new Map());\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [flaggedQuestions, setFlaggedQuestions] = useState<Set<number>>(new Set());\n\n  // Timer - initialized with exam-specific time limit\n  const [isTimerRunning, setIsTimerRunning] = useState(false);\n  const [_timeRemaining, setTimeRemaining] = useState(timeLimitSeconds);\n  const [startTime, setStartTime] = useState<number | null>(null);\n\n  // Modals\n  const [showNavigator, setShowNavigator] = useState(false);\n  const [showSubmitConfirm, setShowSubmitConfirm] = useState(false);\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [_showExitWarning, _setShowExitWarning] = useState(false);\n\n  // Results\n  const [examResults, setExamResults] = useState<{\n    score: number;\n    percentage: number;\n    passed: boolean;\n    timeUsed: number;\n    unitBreakdown: UnitBreakdown[];\n  } | null>(null);\n\n  // Load last attempt from localStorage\n  const [lastAttempt, setLastAttempt] = useState<{\n    score: number;\n    percentage: number;\n    passed: boolean;\n    date: string;\n  } | null>(null);\n\n  useEffect(() => {\n    const stored = localStorage.getItem('lastMockExamAttempt');\n    if (stored) {\n      try {\n        setLastAttempt(JSON.parse(stored));\n      } catch (e) {\n        console.error('Error parsing last attempt:', e);\n      }\n    }\n  }, []);\n\n  // Generate exam questions\n  const startExam = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Generate seed if this is a numbered mock test\n      const seed = testNumber\n        ? generateMockTestSeed(examSlug, testNumber)\n        : undefined;\n\n      const examQuestions = await generateMockExam(\n        examSlug as 'door-supervisor' | 'security-guard' | 'cctv-operator' | 'close-protection',\n        totalQuestions,\n        {\n          shuffleAnswers: true,\n          ensureBalancedUnits: !isFullExam, // Only balance units for specific exam papers\n          seed, // Use seed for reproducible questions\n          filterUnits: isFullExam ? undefined : unitsCovered, // Filter by units covered\n        }\n      );\n\n      if (examQuestions.length < totalQuestions) {\n        throw new Error(`Not enough questions available. Expected ${totalQuestions}, got ${examQuestions.length}`);\n      }\n\n      setQuestions(examQuestions);\n\n      // Initialize answers map\n      const initialAnswers = new Map<string, ExamAnswer>();\n      examQuestions.forEach(q => {\n        initialAnswers.set(q.id, {\n          questionId: q.id,\n          selectedAnswer: null,\n          timeSpent: 0,\n          flagged: false,\n        });\n      });\n      setAnswers(initialAnswers);\n\n      setExamState('in-progress');\n      setIsTimerRunning(true);\n      setStartTime(Date.now());\n    } catch (err) {\n      console.error('Error starting exam:', err);\n      setError(err instanceof Error ? err.message : 'Failed to start exam. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  }, [examSlug, testNumber, totalQuestions, isFullExam, unitsCovered]);\n\n  // Handle answer selection\n  const handleAnswerSelect = useCallback((answerId: string) => {\n    if (examState !== 'in-progress') return;\n\n    const currentQuestion = questions[currentQuestionIndex];\n    if (!currentQuestion) return;\n\n    const currentAnswer = answers.get(currentQuestion.id);\n\n    if (currentAnswer) {\n      setAnswers(new Map(answers.set(currentQuestion.id, {\n        ...currentAnswer,\n        selectedAnswer: answerId,\n      })));\n    }\n  }, [examState, questions, currentQuestionIndex, answers]);\n\n  // Toggle flag for current question\n  const toggleFlag = useCallback(() => {\n    const newFlagged = new Set(flaggedQuestions);\n    if (newFlagged.has(currentQuestionIndex)) {\n      newFlagged.delete(currentQuestionIndex);\n    } else {\n      newFlagged.add(currentQuestionIndex);\n    }\n    setFlaggedQuestions(newFlagged);\n\n    const currentQuestion = questions[currentQuestionIndex];\n    if (!currentQuestion) return;\n\n    const currentAnswer = answers.get(currentQuestion.id);\n    if (currentAnswer) {\n      setAnswers(new Map(answers.set(currentQuestion.id, {\n        ...currentAnswer,\n        flagged: !currentAnswer.flagged,\n      })));\n    }\n  }, [currentQuestionIndex, flaggedQuestions, questions, answers]);\n\n  // Navigate to question\n  const navigateToQuestion = useCallback((index: number) => {\n    if (index >= 0 && index < questions.length) {\n      setCurrentQuestionIndex(index);\n    }\n  }, [questions.length]);\n\n  // Next question\n  const nextQuestion = useCallback(() => {\n    if (currentQuestionIndex < questions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n    }\n  }, [currentQuestionIndex, questions.length]);\n\n  // Previous question\n  const previousQuestion = useCallback(() => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(currentQuestionIndex - 1);\n    }\n  }, [currentQuestionIndex]);\n\n  // Calculate results\n  const calculateResults = useCallback(() => {\n    let correctCount = 0;\n    const unitStats = new Map<string, { total: number; correct: number; title: string }>();\n\n    questions.forEach(question => {\n      const answer = answers.get(question.id);\n      const correctOption = question.options.find(opt => opt.isCorrect);\n      const isCorrect = answer?.selectedAnswer === correctOption?.id;\n\n      if (isCorrect) {\n        correctCount++;\n      }\n\n      // Track by unit\n      const unitId = question.unitId;\n      const unitNumber = parseInt(unitId.substring(1));\n      const unitKey = `U${unitNumber}`;\n\n      if (!unitStats.has(unitKey)) {\n        unitStats.set(unitKey, {\n          total: 0,\n          correct: 0,\n          title: question.questionText.split(':')[0] || `Unit ${unitNumber}`,\n        });\n      }\n\n      const stats = unitStats.get(unitKey)!;\n      stats.total++;\n      if (isCorrect) {\n        stats.correct++;\n      }\n    });\n\n    const percentage = Math.round((correctCount / totalQuestions) * 100);\n    const passed = percentage >= passingScore;\n    const timeUsed = startTime ? Math.floor((Date.now() - startTime) / 1000) : 0;\n\n    // Build unit breakdown\n    const unitBreakdown: UnitBreakdown[] = Array.from(unitStats.entries())\n      .map(([unitKey, stats]) => ({\n        unitNumber: parseInt(unitKey.substring(1)),\n        unitTitle: stats.title,\n        totalQuestions: stats.total,\n        correctAnswers: stats.correct,\n        accuracy: Math.round((stats.correct / stats.total) * 100),\n      }))\n      .sort((a, b) => a.unitNumber - b.unitNumber);\n\n    return {\n      score: correctCount,\n      percentage,\n      passed,\n      timeUsed,\n      unitBreakdown,\n    };\n  }, [questions, answers, startTime]);\n\n  // Submit exam\n  const submitExam = useCallback(async () => {\n    setShowSubmitConfirm(false);\n    setIsTimerRunning(false);\n\n    const results = calculateResults();\n    setExamResults(results);\n    setExamState('completed');\n\n    // Save to localStorage (for backward compatibility)\n    const attemptData = {\n      score: results.score,\n      percentage: results.percentage,\n      passed: results.passed,\n      date: new Date().toISOString(),\n    };\n    localStorage.setItem('lastMockExamAttempt', JSON.stringify(attemptData));\n    setLastAttempt(attemptData);\n\n    // If this is a numbered mock test, save it separately\n    if (testNumber && typeof examSlug === 'string') {\n      saveMockTestResult({\n        testNumber,\n        examSlug: examSlug as string,\n        score: results.score,\n        totalQuestions: totalQuestions,\n        percentage: results.percentage,\n        passed: results.passed,\n        timeSpent: results.timeUsed,\n        completedAt: new Date().toISOString(),\n      });\n    }\n\n    // Save to database if user is logged in\n    if (user) {\n      try {\n        const questionsData = questions.map(q => {\n          const answer = answers.get(q.id);\n          const correctOption = q.options.find(opt => opt.isCorrect);\n          const isCorrect = answer?.selectedAnswer === correctOption?.id;\n\n          return {\n            questionId: q.id,\n            userAnswer: answer?.selectedAnswer || null,\n            isCorrect: isCorrect || false,\n          };\n        });\n\n        await saveMockExamResult(user.id, {\n          qualification: examCode as SIAQualification,\n          score: results.percentage,\n          passingScore: passingScore,\n          totalQuestions: totalQuestions,\n          correctAnswers: results.score,\n          timeSpent: results.timeUsed,\n          questions: questionsData,\n        });\n      } catch (err) {\n        console.error('Error saving exam result:', err);\n        // Don't block user from seeing results\n      }\n    }\n  }, [calculateResults, user, questions, answers, examCode]);\n\n  // Handle time up\n  const handleTimeUp = useCallback(() => {\n    submitExam();\n  }, [submitExam]);\n\n  // Review answers\n  const reviewAnswers = useCallback(() => {\n    setExamState('review');\n    setCurrentQuestionIndex(0);\n  }, []);\n\n  // Retake exam\n  const retakeExam = useCallback(() => {\n    setExamState('pre-exam');\n    setQuestions([]);\n    setAnswers(new Map());\n    setCurrentQuestionIndex(0);\n    setFlaggedQuestions(new Set());\n    setTimeRemaining(timeLimitSeconds);\n    setStartTime(null);\n    setExamResults(null);\n  }, []);\n\n  // Back to mock test list\n  const backToMockList = useCallback(() => {\n    navigate(`/exam/${examSlug}/mock`);\n  }, [navigate, examSlug]);\n\n  // Get question navigator status\n  const getQuestionStatuses = useCallback((): QuestionStatus[] => {\n    return questions.map((q, index) => {\n      const answer = answers.get(q.id);\n      const correctOption = q.options.find(opt => opt.isCorrect);\n      const isCorrect = examState === 'review' || examState === 'completed'\n        ? answer?.selectedAnswer === correctOption?.id\n        : undefined;\n\n      return {\n        answered: answer?.selectedAnswer !== null && answer?.selectedAnswer !== undefined,\n        flagged: flaggedQuestions.has(index),\n        correct: isCorrect,\n      };\n    });\n  }, [questions, answers, flaggedQuestions, examState]);\n\n  // Current question data\n  const currentQuestion = useMemo(() => {\n    if (questions.length === 0) return null;\n    return questions[currentQuestionIndex];\n  }, [questions, currentQuestionIndex]);\n\n  const currentAnswer = useMemo(() => {\n    if (!currentQuestion) return null;\n    return answers.get(currentQuestion.id);\n  }, [currentQuestion, answers]);\n\n  // Stats for submit confirmation\n  const examStats = useMemo(() => {\n    const answered = Array.from(answers.values()).filter(a => a.selectedAnswer !== null).length;\n    const unanswered = totalQuestions - answered;\n    const flagged = flaggedQuestions.size;\n    return { answered, unanswered, flagged };\n  }, [answers, flaggedQuestions]);\n\n  // Prevent accidental navigation away\n  useEffect(() => {\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\n      if (examState === 'in-progress') {\n        e.preventDefault();\n        e.returnValue = '';\n      }\n    };\n\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => window.removeEventListener('beforeunload', handleBeforeUnload);\n  }, [examState]);\n\n  // PRE-EXAM SCREEN\n  if (examState === 'pre-exam') {\n    return (\n      <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\n        <Card padding=\"lg\">\n          <div className=\"text-center mb-8\">\n            <div className=\"inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary-100 mb-4\">\n              <svg className=\"w-10 h-10 text-primary-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n              </svg>\n            </div>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n              {examName} {testNumber ? `Exam ${testNumber}` : 'Mock Exam'}\n            </h1>\n            {testNumber && !isFullExam && (\n              <p className=\"text-md font-medium text-primary-600 mb-2\">\n                {examPaperName}\n              </p>\n            )}\n            <p className=\"text-lg text-gray-600\">\n              {testNumber && !isFullExam\n                ? `Complete this exam paper covering Unit${unitsCovered.length > 1 ? 's' : ''} ${unitsCovered.join(' & ')}`\n                : 'Test your knowledge with a full practice exam'}\n            </p>\n          </div>\n\n          {/* Last Attempt */}\n          {lastAttempt && (\n            <div className={`mb-6 p-4 rounded-lg ${lastAttempt.passed ? 'bg-accent-50 border border-accent-200' : 'bg-warning-50 border border-warning-200'}`}>\n              <h3 className=\"font-semibold text-gray-900 mb-2\">Last Attempt</h3>\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-600\">\n                    Score: <span className=\"font-semibold\">{lastAttempt.score}/{totalQuestions}</span> ({lastAttempt.percentage}%)\n                  </p>\n                  <p className=\"text-xs text-gray-500\">\n                    {new Date(lastAttempt.date).toLocaleDateString()}\n                  </p>\n                </div>\n                <div className={`text-lg font-bold ${lastAttempt.passed ? 'text-accent-600' : 'text-warning-600'}`}>\n                  {lastAttempt.passed ? 'PASSED' : 'NOT PASSED'}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Exam Details */}\n          <div className=\"grid md:grid-cols-3 gap-4 mb-8\">\n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n              <svg className=\"w-8 h-8 text-primary-600 mx-auto mb-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <p className=\"text-2xl font-bold text-gray-900\">{totalQuestions}</p>\n              <p className=\"text-sm text-gray-600\">Questions</p>\n            </div>\n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n              <svg className=\"w-8 h-8 text-primary-600 mx-auto mb-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <p className=\"text-2xl font-bold text-gray-900\">{timeLimitMinutes}</p>\n              <p className=\"text-sm text-gray-600\">Minutes</p>\n            </div>\n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n              <svg className=\"w-8 h-8 text-primary-600 mx-auto mb-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <p className=\"text-2xl font-bold text-gray-900\">{passingScore}%</p>\n              <p className=\"text-sm text-gray-600\">To Pass</p>\n            </div>\n          </div>\n\n          {/* Instructions */}\n          <div className=\"mb-8 space-y-4\">\n            <h2 className=\"text-xl font-semibold text-gray-900\">Instructions</h2>\n            <ul className=\"space-y-2 text-gray-700\">\n              <li className=\"flex items-start gap-2\">\n                <svg className=\"w-5 h-5 text-accent-600 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                </svg>\n                <span>Answer all {totalQuestions} multiple-choice questions</span>\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <svg className=\"w-5 h-5 text-accent-600 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                </svg>\n                <span>You have {timeLimitMinutes} minutes to complete the exam</span>\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <svg className=\"w-5 h-5 text-accent-600 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                </svg>\n                <span>You can navigate between questions and change answers anytime</span>\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <svg className=\"w-5 h-5 text-accent-600 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                </svg>\n                <span>Flag questions for review if you're unsure</span>\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <svg className=\"w-5 h-5 text-accent-600 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                </svg>\n                <span>No feedback will be shown until you submit the exam</span>\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <svg className=\"w-5 h-5 text-accent-600 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                </svg>\n                <span>The exam will auto-submit when time expires</span>\n              </li>\n            </ul>\n          </div>\n\n          {/* Tips */}\n          <div className=\"mb-8 p-4 bg-primary-50 border border-primary-200 rounded-lg\">\n            <h3 className=\"font-semibold text-gray-900 mb-2 flex items-center gap-2\">\n              <svg className=\"w-5 h-5 text-primary-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n              </svg>\n              Tips for Success\n            </h3>\n            <ul className=\"space-y-1 text-sm text-gray-700\">\n              <li>Read each question carefully before answering</li>\n              <li>Manage your time - aim for about 1-2 minutes per question</li>\n              <li>Answer all questions, even if you're unsure (no negative marking)</li>\n              <li>Use the flag feature to mark questions you want to review</li>\n              <li>Review all flagged questions before submitting</li>\n            </ul>\n          </div>\n\n          {/* Error Display */}\n          {error && (\n            <div className=\"mb-6 p-4 bg-error-50 border border-error-200 rounded-lg\">\n              <p className=\"text-error-700\">{error}</p>\n            </div>\n          )}\n\n          {/* Start Button */}\n          <div className=\"flex justify-center\">\n            <Button\n              variant=\"primary\"\n              size=\"lg\"\n              onClick={startExam}\n              loading={loading}\n              disabled={loading}\n              className=\"min-w-[200px]\"\n            >\n              {loading ? 'Loading Exam...' : 'Start Exam'}\n            </Button>\n          </div>\n        </Card>\n      </div>\n    );\n  }\n\n  // RESULTS SCREEN\n  if (examState === 'completed' && examResults) {\n    return (\n      <ResultsScreen\n        score={examResults.score}\n        totalQuestions={totalQuestions}\n        percentage={examResults.percentage}\n        passed={examResults.passed}\n        passingScore={passingScore}\n        timeUsed={examResults.timeUsed}\n        timeLimit={timeLimitSeconds}\n        unitBreakdown={examResults.unitBreakdown}\n        onReviewAnswers={reviewAnswers}\n        onRetake={retakeExam}\n        onDashboard={backToMockList}\n        showCelebration={examResults.passed}\n      />\n    );\n  }\n\n  // EXAM IN PROGRESS OR REVIEW MODE\n  if ((examState === 'in-progress' || examState === 'review') && currentQuestion) {\n    const isReviewMode = examState === 'review';\n    const correctOption = currentQuestion.options.find(opt => opt.isCorrect);\n    const isCurrentCorrect = currentAnswer?.selectedAnswer === correctOption?.id;\n\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        {/* Header with Timer */}\n        <div className=\"sticky top-0 z-40 bg-white border-b border-gray-200 shadow-sm\">\n          <div className=\"container mx-auto px-4 py-4\">\n            <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n              {/* Timer */}\n              <div className=\"flex-shrink-0\">\n                {examState === 'in-progress' && (\n                  <Timer\n                    duration={timeLimitSeconds}\n                    onTimeUp={handleTimeUp}\n                    isRunning={isTimerRunning}\n                    showControls={false}\n                  />\n                )}\n                {isReviewMode && (\n                  <div className=\"text-lg font-semibold text-gray-900\">\n                    Review Mode\n                  </div>\n                )}\n              </div>\n\n              {/* Progress */}\n              <div className=\"flex items-center gap-4\">\n                <span className=\"text-sm font-medium text-gray-600\">\n                  Question {currentQuestionIndex + 1} of {totalQuestions}\n                </span>\n\n                {/* Desktop Navigator Button */}\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setShowNavigator(true)}\n                  leftIcon={\n                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n                    </svg>\n                  }\n                >\n                  Navigator\n                </Button>\n              </div>\n            </div>\n\n            {/* Progress Bar */}\n            <div className=\"mt-3\">\n              <div className=\"h-2 w-full bg-gray-200 rounded-full overflow-hidden\">\n                <div\n                  className=\"h-full bg-primary-500 transition-all duration-300\"\n                  style={{ width: `${((currentQuestionIndex + 1) / totalQuestions) * 100}%` }}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"max-w-4xl mx-auto\">\n            {/* Question Card */}\n            <QuestionCard\n              questionNumber={currentQuestionIndex + 1}\n              totalQuestions={totalQuestions}\n              question={{\n                id: currentQuestion.id,\n                question: currentQuestion.questionText,\n                options: {\n                  A: currentQuestion.options[0]?.text || '',\n                  B: currentQuestion.options[1]?.text || '',\n                  C: currentQuestion.options[2]?.text || '',\n                  D: currentQuestion.options[3]?.text || '',\n                },\n                correctAnswer: correctOption?.id || 'A',\n                explanation: currentQuestion.explanation || '',\n                difficulty: currentQuestion.difficulty,\n                unitTitle: `Unit ${currentQuestion.unitId}`,\n                chapterTitle: currentQuestion.chapterId,\n              }}\n              selectedAnswer={currentAnswer?.selectedAnswer || null}\n              onAnswerSelect={handleAnswerSelect}\n              showResult={isReviewMode}\n              isCorrect={isCurrentCorrect}\n              isBookmarked={flaggedQuestions.has(currentQuestionIndex)}\n              onBookmarkToggle={toggleFlag}\n              disabled={isReviewMode}\n            />\n\n            {/* Navigation Controls */}\n            <div className=\"mt-6 flex items-center justify-between gap-4\">\n              {/* Previous Button */}\n              <Button\n                variant=\"secondary\"\n                size=\"md\"\n                onClick={previousQuestion}\n                disabled={currentQuestionIndex === 0}\n                leftIcon={\n                  <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                  </svg>\n                }\n              >\n                Previous\n              </Button>\n\n              {/* Flag Button (only in exam mode) */}\n              {!isReviewMode && (\n                <Button\n                  variant={flaggedQuestions.has(currentQuestionIndex) ? 'danger' : 'ghost'}\n                  size=\"md\"\n                  onClick={toggleFlag}\n                  leftIcon={\n                    <svg className=\"w-5 h-5\" fill={flaggedQuestions.has(currentQuestionIndex) ? 'currentColor' : 'none'} viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9\" />\n                    </svg>\n                  }\n                >\n                  {flaggedQuestions.has(currentQuestionIndex) ? 'Flagged' : 'Flag for Review'}\n                </Button>\n              )}\n\n              {/* Next/Submit Button */}\n              {currentQuestionIndex === totalQuestions - 1 ? (\n                <Button\n                  variant=\"primary\"\n                  size=\"md\"\n                  onClick={() => {\n                    if (isReviewMode) {\n                      setExamState('completed');\n                    } else {\n                      setShowSubmitConfirm(true);\n                    }\n                  }}\n                  rightIcon={\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  }\n                >\n                  {isReviewMode ? 'Back to Results' : 'Submit Exam'}\n                </Button>\n              ) : (\n                <Button\n                  variant=\"primary\"\n                  size=\"md\"\n                  onClick={nextQuestion}\n                  rightIcon={\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                    </svg>\n                  }\n                >\n                  Next\n                </Button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Question Navigator Modal */}\n        <QuestionNavigator\n          questions={getQuestionStatuses()}\n          currentIndex={currentQuestionIndex}\n          onNavigate={navigateToQuestion}\n          mode=\"modal\"\n          isOpen={showNavigator}\n          onClose={() => setShowNavigator(false)}\n        />\n\n        {/* Submit Confirmation Modal */}\n        <Modal\n          isOpen={showSubmitConfirm}\n          onClose={() => setShowSubmitConfirm(false)}\n          title=\"Submit Exam\"\n          size=\"md\"\n        >\n          <div className=\"space-y-4\">\n            <p className=\"text-gray-700\">\n              Are you sure you want to submit your exam? You won't be able to change your answers after submission.\n            </p>\n\n            <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-gray-600\">Answered:</span>\n                <span className=\"font-semibold text-gray-900\">{examStats.answered}/{totalQuestions}</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-gray-600\">Unanswered:</span>\n                <span className=\"font-semibold text-warning-600\">{examStats.unanswered}</span>\n              </div>\n              {examStats.flagged > 0 && (\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-600\">Flagged for Review:</span>\n                  <span className=\"font-semibold text-error-600\">{examStats.flagged}</span>\n                </div>\n              )}\n            </div>\n\n            {examStats.unanswered > 0 && (\n              <div className=\"p-3 bg-warning-50 border border-warning-200 rounded-lg\">\n                <p className=\"text-sm text-warning-800\">\n                  You have {examStats.unanswered} unanswered question{examStats.unanswered > 1 ? 's' : ''}.\n                  You can still go back and answer them.\n                </p>\n              </div>\n            )}\n\n            <div className=\"flex gap-3 pt-4\">\n              <Button\n                variant=\"ghost\"\n                size=\"md\"\n                fullWidth\n                onClick={() => setShowSubmitConfirm(false)}\n              >\n                Go Back\n              </Button>\n              <Button\n                variant=\"primary\"\n                size=\"md\"\n                fullWidth\n                onClick={submitExam}\n              >\n                Submit Exam\n              </Button>\n            </div>\n          </div>\n        </Modal>\n      </div>\n    );\n  }\n\n  // Loading state\n  return (\n    <div className=\"min-h-screen flex items-center justify-center\">\n      <Spinner size=\"lg\" />\n    </div>\n  );\n}\n"],"names":["Timer","React","duration","onTimeUp","isRunning","onPause","onResume","showControls","timeRemaining","setTimeRemaining","useState","isPaused","setIsPaused","useEffect","interval","prev","formattedTime","useMemo","minutes","seconds","percentage","colorClass","bgColorClass","handlePauseResume","useCallback","jsxs","jsx","ResultsScreen","score","totalQuestions","passed","passingScore","timeUsed","timeLimit","unitBreakdown","onReviewAnswers","onRetake","onDashboard","showCelebration","formatTime","mins","secs","averageTimePerQuestion","Card","unit","Button","getExamConfig","examSlug","testNumber","validSlug","EXAM_DETAILS","examDetails","examPaper","p","MockExamPage","navigate","useNavigate","searchParams","useSearchParams","params","useParams","user","useAuth","testNumberStr","examConfig","timeLimitSeconds","timeLimitMinutes","examName","examCode","examPaperName","unitsCovered","isFullExam","examState","setExamState","loading","setLoading","error","setError","questions","setQuestions","answers","setAnswers","currentQuestionIndex","setCurrentQuestionIndex","flaggedQuestions","setFlaggedQuestions","isTimerRunning","setIsTimerRunning","_timeRemaining","startTime","setStartTime","showNavigator","setShowNavigator","showSubmitConfirm","setShowSubmitConfirm","_showExitWarning","_setShowExitWarning","examResults","setExamResults","lastAttempt","setLastAttempt","stored","e","startExam","seed","generateMockTestSeed","examQuestions","generateMockExam","initialAnswers","q","err","handleAnswerSelect","answerId","currentQuestion","currentAnswer","toggleFlag","newFlagged","navigateToQuestion","index","nextQuestion","previousQuestion","calculateResults","correctCount","unitStats","question","answer","correctOption","opt","isCorrect","unitId","unitNumber","unitKey","stats","a","b","submitExam","results","attemptData","saveMockTestResult","questionsData","saveMockExamResult","handleTimeUp","reviewAnswers","retakeExam","backToMockList","getQuestionStatuses","examStats","answered","unanswered","flagged","handleBeforeUnload","isReviewMode","isCurrentCorrect","QuestionCard","_a","_b","_c","_d","QuestionNavigator","Modal","Spinner"],"mappings":"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"}